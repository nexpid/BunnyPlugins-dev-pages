(function(exports,common,ui,assets,components,metro,toasts,patcher$1,utils){"use strict";var _findByProps,_findByProps1,_findByProps2;const ThemeStore=metro.findByStoreName("ThemeStore");metro.findByProps("triggerHaptic");const colorModule=metro.findByProps("colors","unsafe_rawColors"),colorResolver=colorModule?.internal??colorModule?.meta,TextStyleSheet=metro.findByProps("TextStyleSheet").TextStyleSheet;metro.findByName("Navigator")??((_findByProps=metro.findByProps("Navigator"))===null||_findByProps===void 0||_findByProps.Navigator),((_findByProps1=metro.findByProps("getRenderCloseButton"))===null||_findByProps1===void 0?void 0:_findByProps1.getRenderCloseButton)??((_findByProps2=metro.findByProps("getHeaderCloseButton"))===null||_findByProps2===void 0||_findByProps2.getHeaderCloseButton),metro.findByProps("popModal","pushModal");function resolveSemanticColor(color){let theme=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ThemeStore.theme;return colorResolver.resolveSemanticColor(theme,color)}function Text(param){let{variant,lineClamp,color,align,style,onPress,getChildren,children,liveUpdate}=param;const[_,forceUpdate]=common.React.useReducer(function(x){return~x},0);return common.React.useEffect(function(){if(!liveUpdate)return;const nextSecond=new Date().setMilliseconds(1e3);let interval;const timeout=setTimeout(function(){forceUpdate(),interval=setInterval(forceUpdate,1e3)},nextSecond-Date.now());return function(){clearTimeout(timeout),clearInterval(interval)}},[]),common.React.createElement(common.ReactNative.Text,{style:[variant?TextStyleSheet[variant]:{},color?{color:resolveSemanticColor(ui.semanticColors[color])}:{},align?{textAlign:align}:{},style??{}],numberOfLines:lineClamp,onPress},getChildren?.()??children)}function usePromise(promise){let deps=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const[res,setRes]=common.React.useState({fulfilled:!1}),tracker=common.React.useRef(0);return common.React.useEffect(function(){const id=Date.now();tracker.current=id;const controller=new AbortController;return setRes({fulfilled:!1}),promise(controller.signal).then(function(response){return tracker.current===id&&setRes({fulfilled:!0,success:!0,response})}).catch(function(error){return tracker.current===id&&setRes({fulfilled:!0,success:!1,error})}),function(){return controller.abort()}},deps),res}function managePage(options,navigation){for(var _len=arguments.length,deps=new Array(_len>2?_len-2:0),_key=2;_key<_len;_key++)deps[_key-2]=arguments[_key];navigation||(navigation=common.NavigationNative.useNavigation()),common.React.useEffect(function(){navigation.setOptions(options)},[navigation,...deps])}const cache=new Map,{get}=metro.findByProps("get","post","put","patch","delete");async function getAppDirectoryCategories(){const locale=common.i18n.getLocale(),cacheKey=`app_directory_categories|${locale}`,res=cache.get(cacheKey)??await get(`/application-directory-static/categories?locale=${locale}`);return cache.set(cacheKey,res),res.body}var APICollectionType;(function(APICollectionType2){APICollectionType2[APICollectionType2.Small=1]="Small",APICollectionType2[APICollectionType2.Medium=2]="Medium",APICollectionType2[APICollectionType2.Big=3]="Big"})(APICollectionType||(APICollectionType={}));async function getAppDirectoryCollections(){const locale=common.i18n.getLocale(),cacheKey=`app_directory_collections|${locale}`,res=cache.get(cacheKey)??await get(`/application-directory-static/collections?include_inactive=false&locale=${locale}`);return cache.set(cacheKey,res),res.body}async function getAppDirectoryApplication(appId){const locale=common.i18n.getLocale(),cacheKey=`app_directory_application|${appId},${locale}`,res=cache.get(cacheKey)??await get(`/application-directory-static/applications/${appId}?locale=${locale}`);return cache.set(cacheKey,res),res.body}async function searchAppDirectory(query,page,category,guildId){const locale=common.i18n.getLocale(),cacheKey=`app_directory_search|${query},${page},${category},${guildId},${locale}`,params=new URLSearchParams;params.append("query",query),params.append("page",page.toString()),params.append("category_id",category.toString()),guildId&&params.append("guild_id",guildId),params.append("locale",locale);const res=cache.get(cacheKey)??await get(`/application-directory-static/search?${params.toString()}`);return cache.set(cacheKey,res),res.body}function inServers(x){return common.i18n.Messages.APP_DIRECTORY_PROFILE_EMBED_GUILD_COUNT.format({guildCount:x<1e3?x.toString():x<1e6?`${Math.round(x/100)/10}K`:`${Math.round(x/1e5)/10}M`})}const parseDesc=function(detailed,short){const parsed=[],l=detailed?.split(`
`)??[];let open=!1;if(l.includes("-----------")){let i=0;for(;i<l.length;){var _parsed__content;const rn=l[i],next=l[i+1];l[i+2]==="-----------"?(open=!0,parsed.push({title:next.slice(2,-2),content:[]}),i=i+3):open&&((_parsed__content=parsed[parsed.length-1].content)===null||_parsed__content===void 0||_parsed__content.push(rn)),i++}}else parsed.push({title:common.i18n.Messages.APP_DIRECTORY_PROFILE_DESCRIPTION_HEADING||"Overview",content:l.length?l:[short]});return parsed};metro.find(function(x){return x?.WebView&&!x.default}).WebView,metro.findByProps("SvgXml"),metro.findByProps("isJoi"),metro.findByProps("useSharedValue"),metro.findByProps("FlashList").FlashList,metro.findByName("create"),metro.findByProps("pickSingle","isCancel"),common.ReactNative.NativeModules.MMKVManager,common.ReactNative.NativeModules.DCDFileManager??common.ReactNative.NativeModules.RTNFileManager,common.ReactNative.NativeModules.BundleUpdaterManager,common.ReactNative.NativeModules.DCDSoundManager,common.ReactNative.NativeModules.RNFSManager;const NotFound=function(prop,isFunction){return function(){return common.React.useEffect(function(){toasts.showToast(`${prop} not found! Search for PNF in Debug Logs!`),console.warn(`!! PNF ERROR !!
Missing the redesign ${isFunction?"function":"component"}: ${prop}. Please bug @nexpid about this on Discord!`)},[]),null}},findProp=function(){for(var _len=arguments.length,props=new Array(_len),_key=0;_key<_len;_key++)props[_key]=arguments[_key];var _findByProps3;return(_findByProps3=metro.findByProps(...props))===null||_findByProps3===void 0?void 0:_findByProps3[props[0]]},findPropPolyfill=function(isFunction){for(var _len=arguments.length,props=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)props[_key-1]=arguments[_key];return findProp(...props)??NotFound(props[0],isFunction)},_PressableScale=findProp("PressableScale");findProp("Slider");const Button=findPropPolyfill(!1,"Button");findPropPolyfill(!1,"RowButton"),findPropPolyfill(!1,"FloatingActionButton"),_PressableScale??common.ReactNative.Pressable,findPropPolyfill(!1,"IconButton"),findPropPolyfill(!1,"TextInput"),findPropPolyfill(!1,"Tabs"),findPropPolyfill(!1,"SegmentedControlPages"),findPropPolyfill(!1,"Card"),findPropPolyfill(!1,"Stack"),findPropPolyfill(!0,"useSegmentedControlState");const parser=metro.findByProps("parse","parseToAST","reactParserFor");function parse(text){const reactParse=parser.parse;return reactParse(text,!0,{allowHeading:!0,allowLinks:!0,allowList:!0})}const{pushModal,popModal}=metro.findByProps("pushModal","popModal"),OAuth2AuthorizeModal=metro.findByName("OAuth2AuthorizeModal");function openOauth2Modal(applicationId,installParams){pushModal({key:"oauth2-authorize",modal:{key:"oauth2-authorize",modal:OAuth2AuthorizeModal,animation:"slide-up",shouldPersistUnderModals:!1,props:{clientId:applicationId,...installParams,permissions:BigInt(installParams.permissions),cancelCompletesFlow:!1,dismissOAuthModal:function(){return popModal("oauth2-authorize")}},closable:!0}})}const{TableRowGroup,TableRow:TableRow$1,TableRowIcon,TableRowGroupTitle}=metro.findByProps("TableRowGroup","TableRow"),{TableRowDivider}=metro.findByProps("TableRowDivider");function AppInfoPage(param){let{app,guildId}=param;var _app_directory_entry_carousel_items,_app_directory_entry_external_urls;const styles=common.stylesheet.createThemedStyleSheet({carouselEmpty:{backgroundColor:ui.rawColors.BRAND_500,width:"100%",aspectRatio:6/2,borderRadius:8},carousel:{backgroundColor:ui.semanticColors.CARD_PRIMARY_BG,width:"100%",aspectRatio:5/3,borderRadius:8},carouselDots:{position:"absolute",bottom:8,justifyContent:"center",flexDirection:"row",width:"100%",height:6,gap:9},carouselDot:{height:"100%",aspectRatio:1,borderRadius:2147483647},carouselDotActive:{backgroundColor:"#fff"},carouselDotInactive:{backgroundColor:"#fff4"},appIcon:{borderRadius:2147483647,backgroundColor:ui.semanticColors.BG_BASE_SECONDARY,width:80,height:80,marginTop:-40,marginLeft:8,marginBottom:8},group:{backgroundColor:ui.semanticColors.CARD_PRIMARY_BG,padding:16,borderRadius:16,marginBottom:24},sillyGroup:{backgroundColor:ui.semanticColors.CARD_PRIMARY_BG,paddingTop:16,borderRadius:16,marginBottom:24},baseAppActions:{flexDirection:"row",gap:12},baseAppActionIcon:{marginRight:4,height:20,width:20,tintColor:ui.semanticColors.TEXT_NORMAL},popularCommand:{flexDirection:"row",gap:8,alignItems:"center"},popularCommandCmd:{backgroundColor:ui.semanticColors.BG_MOD_SUBTLE,padding:6,borderWidth:1,borderColor:ui.semanticColors.BG_MOD_STRONG,borderRadius:8}});managePage({title:app.name});const carouselProgress=common.React.useRef(new common.ReactNative.Animated.Value(0)).current,carouselWidth=common.ReactNative.Dimensions.get("window").width-32,carouselIndexContent=((_app_directory_entry_carousel_items=app.directory_entry.carousel_items)===null||_app_directory_entry_carousel_items===void 0?void 0:_app_directory_entry_carousel_items.map(function(_,i){return i}))??[],detailedInfoPromise=usePromise(function(){return getAppDirectoryApplication(app.id)},[]),detailedInfo=detailedInfoPromise.fulfilled&&detailedInfoPromise.success&&detailedInfoPromise.response;return detailedInfo?common.React.createElement(common.ReactNative.ScrollView,{style:{flex:1,paddingHorizontal:16,paddingTop:16}},carouselIndexContent.length?common.React.createElement(common.ReactNative.View,{style:styles.carousel},common.React.createElement(common.ReactNative.FlatList,{horizontal:!0,pagingEnabled:!0,showsHorizontalScrollIndicator:!1,decelerationRate:"normal",data:app.directory_entry.carousel_items.filter(function(x){return x.type===1}),style:{width:"100%",height:"100%",position:"relative"},scrollEventThrottle:16,onScroll:function(param2){let{nativeEvent}=param2;return common.ReactNative.Animated.timing(carouselProgress,{toValue:Math.max(Math.min(nativeEvent.contentOffset.x/nativeEvent.layoutMeasurement.width,carouselIndexContent.length),0),duration:100,easing:common.ReactNative.Easing.linear,useNativeDriver:!0}).start()},renderItem:function(param2){let{item:img}=param2;return common.React.createElement(common.ReactNative.Image,{style:{height:"100%",width:carouselWidth,borderRadius:8},source:{uri:`${img.proxy_url}?width=${Math.floor(carouselWidth)}&height=${Math.floor(carouselWidth/styles.carousel.aspectRatio)}`},resizeMode:"contain"})}}),common.React.createElement(common.ReactNative.View,{style:styles.carouselDots},carouselIndexContent.map(function(i){return common.React.createElement(common.ReactNative.Animated.View,{style:[styles.carouselDot,{backgroundColor:carouselIndexContent.length===1?styles.carouselDotActive.backgroundColor:carouselProgress.interpolate({inputRange:carouselIndexContent,outputRange:carouselIndexContent.map(function(j){return i===j?styles.carouselDotActive.backgroundColor:styles.carouselDotInactive.backgroundColor})})}]})}))):common.React.createElement(common.ReactNative.View,{style:styles.carouselEmpty}),common.React.createElement(common.ReactNative.Image,{style:styles.appIcon,source:{uri:`https://cdn.discordapp.com/app-icons/${app.id}/${app.icon}.webp?size=80`}}),common.React.createElement(common.ReactNative.View,{style:styles.group},common.React.createElement(Text,{variant:"text-lg/semibold",color:"TEXT_NORMAL"},app.name),common.React.createElement(Text,{variant:"text-md/normal",color:"TEXT_MUTED",style:{paddingBottom:8},lineClamp:1},inServers(app.directory_entry.guild_count)),app.categories.length>0&&common.React.createElement(Text,{variant:"text-md/normal",color:"TEXT_MUTED",style:{paddingBottom:8},lineClamp:1},app.categories.map(function(x){return x.name}).join(", ")),common.React.createElement(common.ReactNative.View,{style:{marginBottom:12}},common.React.createElement(TableRowDivider,null)),common.React.createElement(common.ReactNative.View,{style:styles.baseAppActions},common.React.createElement(Button,{style:{flex:1/2},text:common.i18n.Messages.APP_DIRECTORY_PROFILE_SHARE_BUTTON||"Copy Link",variant:"secondary",size:"md",icon:assets.getAssetIDByName("copy"),onPress:function(){common.clipboard.setString(`https://discord.com/application-directory/${app.id}`),toasts.showToast(common.i18n.Messages.COPIED_LINK||"Copied to clipboard.",assets.getAssetIDByName("toast_copy_link"))}}),common.React.createElement(Button,{style:{flex:1/2},text:common.i18n.Messages.APP_DIRECTORY_PROFILE_ADD_BUTTON||"Add to Server",variant:"primary",size:"md",icon:assets.getAssetIDByName("ic_download_24px"),onPress:function(){return app.custom_install_url?common.url.openURL(app.custom_install_url):openOauth2Modal(app.id,Object.assign(app.install_params??{},guildId&&{guild_id:guildId,disable_guild_select:!0}))}}))),common.React.createElement(common.ReactNative.View,{style:styles.group},parseDesc(app.directory_entry.detailed_description,app.directory_entry.short_description).map(function(param2,i,a){let{title,content}=param2;return common.React.createElement(common.React.Fragment,null,common.React.createElement(TableRowGroupTitle,{title}),common.React.createElement(Text,{variant:"text-md/normal",color:"TEXT_NORMAL",style:{marginBottom:i!==a.length-1?24:0}},parse(content.join(`
`))))})),detailedInfo.directory_entry.popular_application_commands&&common.React.createElement(common.ReactNative.View,{style:styles.group},common.React.createElement(TableRowGroupTitle,{title:common.i18n.Messages.APP_DIRECTORY_PROFILE_COMMANDS_HEADING||"Popular Slash Commands"}),detailedInfo.directory_entry.popular_application_commands.map(function(x,i,a){return common.React.createElement(common.ReactNative.View,{style:[styles.popularCommand,{marginBottom:i!==a.length-1?8:0}]},common.React.createElement(Text,{variant:"text-md/semibold",color:"TEXT_NORMAL",style:styles.popularCommandCmd},"/",x.name),common.React.createElement(Text,{variant:"text-md/normal",color:"HEADER_SECONDARY",lineClamp:1},x.description))})),common.React.createElement(common.ReactNative.View,{style:styles.sillyGroup},common.React.createElement(common.ReactNative.View,{style:{paddingHorizontal:16}},common.React.createElement(TableRowGroupTitle,{title:common.i18n.Messages.APP_DIRECTORY_PROFILE_LINKS_HEADING||"Links"})),common.React.createElement(TableRowGroup,null,...((_app_directory_entry_external_urls=app.directory_entry.external_urls)===null||_app_directory_entry_external_urls===void 0?void 0:_app_directory_entry_external_urls.map(function(x){return common.React.createElement(TableRow$1,{label:x.name,icon:common.React.createElement(TableRowIcon,{source:assets.getAssetIDByName("ic_link")}),onPress:function(){return common.url.openURL(x.url)}})}))??[],app.terms_of_service_url&&common.React.createElement(TableRow$1,{label:common.i18n.Messages.APP_DIRECTORY_PROFILE_TERMS_LINK||"Terms of Service",icon:common.React.createElement(TableRowIcon,{source:assets.getAssetIDByName("ic_link")}),onPress:function(){return common.url.openURL(app.terms_of_service_url)}}),app.privacy_policy_url&&common.React.createElement(TableRow$1,{label:common.i18n.Messages.APP_DIRECTORY_PROFILE_PRIVACY_LINK||"Privacy Policy",icon:common.React.createElement(TableRowIcon,{source:assets.getAssetIDByName("ic_lock")}),onPress:function(){return common.url.openURL(app.privacy_policy_url)}}))),common.React.createElement(common.ReactNative.View,{style:{height:16}})):common.React.createElement(common.ReactNative.ActivityIndicator,{size:"large",style:{flex:1}})}function getAppInfoPageRender(app,guildId){return function(){return common.React.createElement(AppInfoPage,{app,guildId})}}function AppDirectoryPage(param){let{guildId,pushScreen}=param;var _collectionsPromise_response_sort,_collectionsPromise_response,_pushPages_,_pushPages_1;const locale=common.i18n.getLocale(),[search,setSearch]=common.React.useState(""),[selCategory,setSelCategory]=common.React.useState(void 0),categoriesPromise=usePromise(function(){return getAppDirectoryCategories()},[locale]),collectionsPromise=usePromise(function(){return getAppDirectoryCollections()},[locale]),[searchPage,setSearchPage]=common.React.useState(0),searchResultsPromise=usePromise(function(){return search||selCategory!==void 0?searchAppDirectory(search,searchPage+1,selCategory??0,guildId):null},[search,searchPage,selCategory,locale]),categories=categoriesPromise.fulfilled&&categoriesPromise.success&&categoriesPromise.response,collections=collectionsPromise.fulfilled&&collectionsPromise.success&&((_collectionsPromise_response_sort=(_collectionsPromise_response=collectionsPromise.response).sort)===null||_collectionsPromise_response_sort===void 0?void 0:_collectionsPromise_response_sort.call(_collectionsPromise_response,function(a,b){return a.position-b.position})),searchResults=searchResultsPromise.fulfilled&&searchResultsPromise.success&&searchResultsPromise.response;common.React.useEffect(function(){search?search&&!selCategory&&setSelCategory(0):setSelCategory(void 0)},[search]),common.React.useEffect(function(){searchResults||setSearchPage(0)},[searchResults]);const jwidth=common.ReactNative.Dimensions.get("screen").width-32,styles=common.stylesheet.createThemedStyleSheet({category:{backgroundColor:ui.semanticColors.BG_SURFACE_OVERLAY,flexDirection:"row",justifyContent:"center",gap:8,padding:8,borderRadius:8},selCategory:{backgroundColor:ui.semanticColors.BG_SURFACE_RAISED},categoryIcon:{width:24,height:24,tintColor:ui.semanticColors.INTERACTIVE_NORMAL},bottomNav:{flexDirection:"row",marginTop:16,gap:8,justifyContent:"center"},bottomNavItem:{backgroundColor:ui.semanticColors.BG_MOD_SUBTLE,borderRadius:6969,paddingVertical:6,paddingHorizontal:11},bottomNavItemOff:{backgroundColor:ui.semanticColors.BG_MOD_FAINT,borderRadius:6969,paddingVertical:6,paddingHorizontal:11},bottomNavItemSelected:{backgroundColor:ui.semanticColors.BUTTON_OUTLINE_BRAND_BACKGROUND_HOVER,borderRadius:6969,paddingVertical:6,paddingHorizontal:11},androidRipple:{color:ui.semanticColors.ANDROID_RIPPLE,cornerRadius:8,foreground:!0}}),collectionStyles=common.stylesheet.createThemedStyleSheet({card:{backgroundColor:ui.semanticColors.CARD_PRIMARY_BG,borderRadius:8,width:jwidth},cardImage:{backgroundColor:ui.semanticColors.CARD_SECONDARY_BG,borderTopLeftRadius:8,borderTopRightRadius:8,width:"100%",aspectRatio:2.5/1},cardContent:{paddingHorizontal:16,paddingVertical:16,flexDirection:"column",gap:4},smallProfile:{flexDirection:"row",gap:16},smallAvatar:{backgroundColor:ui.semanticColors.BG_MOD_FAINT,width:48,height:48,borderRadius:2147483647},smallProfileThing:{flexDirection:"column",justifyContent:"center",gap:4}}),navigation=common.NavigationNative.useNavigation();managePage({title:"App Directory"});const onAppPress=function(app){return function(){return pushScreen?pushScreen("APP_INFO",{app:"application"in app?app.application:app,guildId}):navigation.push("VendettaCustomPage",{title:"application"in app?app.application.name:app.name,render:getAppInfoPageRender("application"in app?app.application:app,guildId)})}},pushPageI=searchResults?Math.max(Math.min(searchPage-3,searchResults.num_pages-7),0):0,pushPages=searchResults?new Array(searchResults.num_pages).fill(0).map(function(_,i){return{num:i+1,selected:i===searchPage}}).slice(pushPageI,pushPageI+7):[],pageFirst=((_pushPages_=pushPages[0])===null||_pushPages_===void 0?void 0:_pushPages_.num)===1,pageLast=((_pushPages_1=pushPages[pushPages.length-1])===null||_pushPages_1===void 0?void 0:_pushPages_1.num)===searchResults?.num_pages,renderPushPages=pushPages.slice(pageFirst?0:2,pageLast?pushPages.length:pushPages.length-2),isFirst=searchPage===0,isLast=searchResults&&searchPage===searchResults.num_pages-1;return common.React.createElement(common.ReactNative.ScrollView,{style:{flex:1,paddingHorizontal:16,paddingTop:12}},common.React.createElement(components.Search,{placeholder:"Search...",onChangeText:setSearch}),common.React.createElement(common.ReactNative.View,{style:{height:12}}),categories?common.React.createElement(common.ReactNative.FlatList,{horizontal:!0,data:[{id:0,name:"All"},...categories].sort(function(a,b){return selCategory?a.id===selCategory?-1:b.id===selCategory?1:0:0}),keyExtractor:function(d){return d.id.toString()},renderItem:function(param2){let{item}=param2;return common.React.createElement(common.ReactNative.Pressable,{style:[styles.category,selCategory===item.id&&styles.selCategory],android_ripple:styles.androidRipple,onPress:function(){selCategory===item.id&&!search?setSelCategory(void 0):setSelCategory(item.id),common.ReactNative.LayoutAnimation.configureNext(common.ReactNative.LayoutAnimation.Presets.easeInEaseOut)}},common.React.createElement(common.ReactNative.Image,{style:styles.categoryIcon,source:assets.getAssetIDByName({0:"ic_globe_24px",4:"ic_monitor_24px",6:"ic_controller_24px",8:"img_nitro_remixing",9:"ic_friend_wave_24px",10:"ic_progress_wrench_24px"}[item.id]??"")}),common.React.createElement(Text,{variant:"text-md/semibold",color:"TEXT_NORMAL"},item.name))},ItemSeparatorComponent:function(){return common.React.createElement(common.ReactNative.View,{style:{width:8}})},style:{paddingBottom:16}}):common.React.createElement(common.ReactNative.ActivityIndicator,{size:"small",style:{flex:1,paddingBottom:16}}),collections&&searchResults!==void 0?searchResults?common.React.createElement(common.React.Fragment,null,common.React.createElement(common.ReactNative.FlatList,{data:searchResults.results,ItemSeparatorComponent:function(){return common.React.createElement(common.ReactNative.View,{style:{height:8}})},renderItem:function(param2){let{item:{data:app}}=param2;return common.React.createElement(common.ReactNative.Pressable,{style:collectionStyles.card,android_ripple:styles.androidRipple,onPress:onAppPress(app)},common.React.createElement(common.ReactNative.View,{style:collectionStyles.cardContent},common.React.createElement(common.ReactNative.View,{style:collectionStyles.smallProfile},common.React.createElement(common.ReactNative.Image,{style:collectionStyles.smallAvatar,source:{uri:`https://cdn.discordapp.com/app-icons/${app.id}/${app.icon}.webp?size=60`}}),common.React.createElement(common.ReactNative.View,{style:collectionStyles.smallProfileThing},common.React.createElement(Text,{variant:"text-md/semibold",color:"TEXT_NORMAL"},app.name),app.categories[0]&&common.React.createElement(Text,{variant:"text-md/medium",color:"TEXT_MUTED"},app.categories[0].name))),common.React.createElement(Text,{variant:"text-md/medium",color:"TEXT_MUTED",style:{paddingBottom:8}},inServers(app.directory_entry.guild_count)),common.React.createElement(Text,{variant:"text-md/semibold",color:"TEXT_NORMAL",lineClamp:2},app.directory_entry.short_description)))}}),common.React.createElement(common.ReactNative.View,{style:styles.bottomNav},common.React.createElement(common.ReactNative.Pressable,{style:isFirst?styles.bottomNavItemOff:styles.bottomNavItem,onPress:function(){return setSearchPage(Math.max(Math.min(searchPage-1,searchResults.num_pages-1),0))},disabled:isFirst,key:"page-back"},common.React.createElement(Text,{variant:"text-sm/bold",color:isFirst?"TEXT_MUTED":"TEXT_NORMAL"},"<")),!pageFirst&&common.React.createElement(common.React.Fragment,null,common.React.createElement(common.ReactNative.Pressable,{style:styles.bottomNavItem,onPress:function(){return setSearchPage(0)},key:"page-1"},common.React.createElement(Text,{variant:"text-sm/semibold",color:"TEXT_NORMAL"},"1")),common.React.createElement(Text,{variant:"text-md/semibold",color:"TEXT_MUTED",key:"page-sep-left"},"...")),renderPushPages.map(function(x){return common.React.createElement(common.ReactNative.Pressable,{style:x.selected?styles.bottomNavItemSelected:styles.bottomNavItem,onPress:function(){return setSearchPage(x.num-1)},key:`page-${x.num}`},common.React.createElement(Text,{variant:"text-sm/semibold",color:"TEXT_NORMAL"},x.num))}),!pageLast&&common.React.createElement(common.React.Fragment,null,common.React.createElement(Text,{variant:"text-md/semibold",color:"TEXT_MUTED",key:"page-sep-right"},"..."),common.React.createElement(common.ReactNative.Pressable,{style:styles.bottomNavItem,onPress:function(){return setSearchPage(searchResults.num_pages-1)},key:`page-${searchResults.num_pages}`},common.React.createElement(Text,{variant:"text-sm/semibold",color:"TEXT_NORMAL"},searchResults.num_pages))),common.React.createElement(common.ReactNative.Pressable,{style:isLast?styles.bottomNavItemOff:styles.bottomNavItem,onPress:function(){return setSearchPage(Math.max(Math.min(searchPage+1,searchResults.num_pages-1),0))},disabled:isLast,key:"page-next"},common.React.createElement(Text,{variant:"text-sm/bold",color:isLast?"TEXT_MUTED":"TEXT_NORMAL"},">")))):common.React.createElement(common.React.Fragment,null,collections.map(function(x,i){return common.React.createElement(common.React.Fragment,null,common.React.createElement(Text,{variant:"text-lg/bold",color:"TEXT_NORMAL",style:{paddingBottom:24,paddingTop:i!==0?30:0}},x.title),common.React.createElement(common.ReactNative.FlatList,{horizontal:!0,data:x.application_directory_collection_items.sort(function(a,b){return a.position-b.position}),ItemSeparatorComponent:function(){return common.React.createElement(common.ReactNative.View,{style:{width:8}})},renderItem:function(param2){let{item:app}=param2;return x.type===APICollectionType.Big?common.React.createElement(common.ReactNative.Pressable,{style:[collectionStyles.card],android_ripple:styles.androidRipple,onPress:onAppPress(app)},app.image_hash&&common.React.createElement(common.ReactNative.Image,{style:collectionStyles.cardImage,source:{uri:`https://cdn.discordapp.com/app-assets/application-directory/collection-items/${app.id}/${app.image_hash}.webp?size=512`},resizeMode:"cover"}),common.React.createElement(common.ReactNative.View,{style:collectionStyles.cardContent},common.React.createElement(Text,{variant:"text-lg/semibold",color:"TEXT_NORMAL",style:{paddingBottom:4}},app.application.name),common.React.createElement(Text,{variant:"text-md/semibold",color:"TEXT_NORMAL",lineClamp:2},app.application.directory_entry.short_description))):x.type===APICollectionType.Medium?common.React.createElement(common.ReactNative.Pressable,{style:[collectionStyles.card,{width:jwidth/1.5}],android_ripple:styles.androidRipple,onPress:onAppPress(app)},app.image_hash&&common.React.createElement(common.ReactNative.Image,{style:collectionStyles.cardImage,source:{uri:`https://cdn.discordapp.com/app-assets/application-directory/collection-items/${app.id}/${app.image_hash}.webp?size=256`},resizeMode:"cover"}),common.React.createElement(common.ReactNative.View,{style:collectionStyles.cardContent},common.React.createElement(Text,{variant:"text-md/semibold",color:"TEXT_NORMAL"},app.application.name),common.React.createElement(Text,{variant:"text-md/medium",color:"TEXT_MUTED",style:{paddingBottom:8}},app.application.categories[0]&&common.React.createElement(common.React.Fragment,null,app.application.categories[0].name,common.React.createElement(Text,{variant:"text-md/bold",color:"TEXT_MUTED",style:{opacity:.5}},"  ","\xB7","  ")),inServers(app.application.directory_entry.guild_count)),common.React.createElement(Text,{variant:"text-md/semibold",color:"TEXT_NORMAL",lineClamp:2},app.application.directory_entry.short_description))):common.React.createElement(common.ReactNative.Pressable,{style:[collectionStyles.card,{width:jwidth/1.55}],android_ripple:styles.androidRipple,onPress:onAppPress(app)},common.React.createElement(common.ReactNative.View,{style:collectionStyles.cardContent},common.React.createElement(common.ReactNative.View,{style:collectionStyles.smallProfile},common.React.createElement(common.ReactNative.Image,{style:collectionStyles.smallAvatar,source:{uri:`https://cdn.discordapp.com/app-icons/${app.application.id}/${app.application.icon}.webp?size=60`}}),common.React.createElement(common.ReactNative.View,{style:collectionStyles.smallProfileThing},common.React.createElement(Text,{variant:"text-md/semibold",color:"TEXT_NORMAL"},app.application.name),app.application.categories[0]&&common.React.createElement(Text,{variant:"text-md/medium",color:"TEXT_MUTED"},app.application.categories[0].name))),common.React.createElement(Text,{variant:"text-md/medium",color:"TEXT_MUTED",style:{paddingBottom:8}},inServers(app.application.directory_entry.guild_count)),common.React.createElement(Text,{variant:"text-md/semibold",color:"TEXT_NORMAL",lineClamp:2},app.application.directory_entry.short_description)))}}))})):common.React.createElement(common.ReactNative.ActivityIndicator,{size:"small",style:{flex:1,marginTop:50}}),common.React.createElement(common.ReactNative.View,{style:{height:48}}))}const{FormRow}=components.Forms,{TableRow}=metro.findByProps("TableRow"),{useInMainTabsExperiment}=metro.findByProps("useInMainTabsExperiment","isInMainTabsExperiment");function AutoRow(param){let{label,icon,onPress}=param;const styles=common.stylesheet.createThemedStyleSheet({icon:{width:24,height:24,tintColor:ui.semanticColors.INTERACTIVE_NORMAL,opacity:.6}});return useInMainTabsExperiment()?React.createElement(TableRow,{label,icon:React.createElement(common.ReactNative.Image,{style:styles.icon,source:icon}),onPress}):React.createElement(FormRow,{label,leading:React.createElement(FormRow.Icon,{source:icon}),onPress})}const{FormSection}=components.Forms;function ManageGuildSection(param){let{run}=param;return React.createElement(FormSection,{title:"Apps"},React.createElement(AutoRow,{label:"App Directory",icon:assets.getAssetIDByName("ic_robot_24px"),onPress:run}))}const GuildSettingsModal=metro.findByName("GuildSettingsModal",!1),GuildSettingsModalLanding=metro.findByName("GuildSettingsModalLanding",!1);function patcher(){const patches=new Array;patches.push(patcher$1.after("default",GuildSettingsModal,function(_,ret){ret.props.screens={...ret.props.screens,APP_DIRECTORY:{title:"App Directory",render:AppDirectoryPage},APP_INFO:{title:"",render:AppInfoPage}}}));let bowomp;return patches.push(function(){return bowomp?.()}),patches.push(patcher$1.after("default",GuildSettingsModalLanding,function(_,main){bowomp?.(),bowomp=patcher$1.after("type",main,function(_2,content){const sett=utils.findInReactTree(content,function(x){var _x_type;return((_x_type=x.type)===null||_x_type===void 0?void 0:_x_type.name)==="SettingsSection"});sett&&patches.push(patcher$1.after("type",sett,function(param,sret){let[{guild,pushScreen}]=param;return common.React.createElement(common.React.Fragment,{},[sret,common.React.createElement(ManageGuildSection,{run:function(){return pushScreen("APP_DIRECTORY",{guildId:guild.id,pushScreen})}})])},!0))})})),function(){return patches.forEach(function(x){return x()})}}let unpatch;var index={onLoad:function(){return unpatch=patcher()},onUnload:function(){return unpatch?.()},settings:AppDirectoryPage};return exports.default=index,Object.defineProperty(exports,"__esModule",{value:!0}),exports})({},vendetta.metro.common,vendetta.ui,vendetta.ui.assets,vendetta.ui.components,vendetta.metro,vendetta.ui.toasts,vendetta.patcher,vendetta.utils);
