(function(exports,metro,plugin,alerts,assets,toasts,utils,debug,common,storage,ui,components,_vendetta,constants$1){"use strict";var _findByProps,_findByProps1,_findByProps2,_findByProps3,_findByProps4;const ThemeStore$1=metro.findByStoreName("ThemeStore");metro.findByProps("triggerHaptic");const colorModule=metro.findByProps("colors","unsafe_rawColors"),colorResolver=colorModule?.internal??colorModule?.meta,TextStyleSheet=metro.findByProps("TextStyleSheet").TextStyleSheet;((_findByProps=metro.findByProps("ActionSheet"))===null||_findByProps===void 0?void 0:_findByProps.ActionSheet)??metro.find(function(x){var _x_render;return((_x_render=x.render)===null||_x_render===void 0?void 0:_x_render.name)==="ActionSheet"});const LazyActionSheet=metro.findByProps("openLazy","hideActionSheet"),{openLazy,hideActionSheet}=LazyActionSheet;metro.findByProps("ActionSheetTitleHeader","ActionSheetCloseButton","ActionSheetContentContainer"),(_findByProps1=metro.findByProps("ActionSheetRow"))===null||_findByProps1===void 0||_findByProps1.ActionSheetRow,metro.findByName("Navigator")??((_findByProps2=metro.findByProps("Navigator"))===null||_findByProps2===void 0||_findByProps2.Navigator),((_findByProps3=metro.findByProps("getRenderCloseButton"))===null||_findByProps3===void 0?void 0:_findByProps3.getRenderCloseButton)??((_findByProps4=metro.findByProps("getHeaderCloseButton"))===null||_findByProps4===void 0||_findByProps4.getHeaderCloseButton),metro.findByProps("popModal","pushModal");function resolveSemanticColor(color){let theme=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ThemeStore$1.theme;return colorResolver.resolveSemanticColor(theme,color)}function openSheet(sheet,props){try{openLazy(new Promise(function(x){return x({default:sheet})}),"ActionSheet",props)}catch(e){_vendetta.logger.error(e.stack),toasts.showToast("Got error when opening ActionSheet! Please check debug logs",assets.getAssetIDByName("Smal"))}}const{Text:_Text$1}=components.General;function Text(param){let{variant,lineClamp,color,align,style,onPress,getChildren,children,liveUpdate}=param;const[_,forceUpdate]=common.React.useReducer(function(x){return~x},0);return common.React.useEffect(function(){if(!liveUpdate)return;const nextSecond=new Date().setMilliseconds(1e3);let interval;const timeout=setTimeout(function(){forceUpdate(),interval=setInterval(forceUpdate,1e3)},nextSecond-Date.now());return function(){clearTimeout(timeout),clearInterval(interval)}},[]),common.React.createElement(_Text$1,{style:[variant?TextStyleSheet[variant]:{},color?{color:resolveSemanticColor(ui.semanticColors[color])}:{},align?{textAlign:align}:{},style??{}],numberOfLines:lineClamp,onPress},getChildren?.()??children)}const{View:View$6,Pressable:Pressable$3}=components.General;function BetterTableRowTitle(param){let{title,onPress,icon}=param;const styles=common.stylesheet.createThemedStyleSheet({androidRipple:{color:ui.semanticColors.ANDROID_RIPPLE,cornerRadius:4},icon:{width:16,height:16,marginTop:1.5,tintColor:ui.semanticColors.TEXT_MUTED}}),UseCompontent=onPress?Pressable$3:View$6;return React.createElement(UseCompontent,{android_ripple:styles.androidRipple,disabled:!1,accessibilityRole:"button",onPress,style:{marginBottom:8,gap:4,flexDirection:"row",alignItems:"center"}},icon&&React.createElement(common.ReactNative.Image,{style:styles.icon,source:icon,resizeMode:"cover"}),React.createElement(Text,{variant:"text-sm/semibold",color:"TEXT_MUTED"},title))}function BetterTableRowGroup(param){let{title,onTitlePress,icon,children,padding}=param;const styles=common.stylesheet.createThemedStyleSheet({main:{backgroundColor:ui.semanticColors.CARD_PRIMARY_BG,borderRadius:16,overflow:"hidden",flex:1}});return React.createElement(View$6,{style:{marginHorizontal:16,marginTop:16}},title?typeof title=="string"?React.createElement(BetterTableRowTitle,{title,onPress:onTitlePress,icon}):title:null,React.createElement(View$6,{style:styles.main},padding?React.createElement(View$6,{style:{paddingHorizontal:16,paddingVertical:16}},children):children))}const{View:View$5}=components.General;function LineDivider(param){let{addPadding}=param;const styles=common.stylesheet.createThemedStyleSheet({line:{width:"100%",height:2,backgroundColor:ui.semanticColors.BACKGROUND_ACCENT,borderRadius:2147483647}});return React.createElement(View$5,{style:[{marginTop:16,marginBottom:16},addPadding&&{marginHorizontal:16}]},React.createElement(View$5,{style:styles.line}))}const{Text:_Text}=components.General;var RichText;(function(RichText2){function Bold(param){let{children,onPress}=param;return React.createElement(Text,{variant:"text-md/bold",onPress},children)}RichText2.Bold=Bold;function Underline(param){let{children,onPress}=param;return React.createElement(_Text,{style:{textDecorationLine:"underline"},onPress},children)}RichText2.Underline=Underline})(RichText||(RichText={})),metro.find(function(x){return x?.WebView&&!x.default}).WebView,metro.findByProps("SvgXml"),metro.findByProps("isJoi"),metro.findByProps("useSharedValue"),metro.findByProps("FlashList").FlashList,metro.findByName("create"),common.ReactNative.NativeModules.MMKVManager,common.ReactNative.NativeModules.DCDFileManager??common.ReactNative.NativeModules.RTNFileManager,common.ReactNative.NativeModules.BundleUpdaterManager,common.ReactNative.NativeModules.DCDSoundManager,common.ReactNative.NativeModules.RNFSManager;const OhFuck=function(prop){return function(){return common.React.useEffect(function(){toasts.showToast("Uh oh, something broke! Search for fckp in Debug Logs!"),console.warn(`Uh oh (fckp)!!
Missing the redesign component: ${prop}. Please bug @nexpid about this on Discord!`)},[]),null}},OhFuckFunction=function(prop){return function(){return toasts.showToast("Uh oh, something broke! Search for fckp in Debug Logs!"),console.warn(`Uh oh (fckp)!!
Missing the redesign function: ${prop}. Please bug @nexpid about this on Discord!`),null}},findThing=function(){for(var _len=arguments.length,props=new Array(_len),_key=0;_key<_len;_key++)props[_key]=arguments[_key];var _findByProps5;return(_findByProps5=metro.findByProps(...props))===null||_findByProps5===void 0?void 0:_findByProps5[props[0]]},findThingRequired=function(alt){for(var _len=arguments.length,props=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)props[_key-1]=arguments[_key];return findThing(...props)??alt(props[0])};function buttonVariantPolyfill(){return"REDESIGN_BUTTON_ACTIVE_TEXT"in ui.semanticColors?{active:"active",destructive:"destructive"}:{active:"positive",destructive:"danger"}}findThingRequired(OhFuck,"Button"),findThingRequired(OhFuck,"RowButton"),findThing("Slider"),findThingRequired(OhFuck,"FloatingActionButton"),findThingRequired(OhFuck,"TextInput"),findThingRequired(OhFuck,"Tabs"),findThingRequired(OhFuck,"SegmentedControlPages"),findThingRequired(OhFuckFunction,"useSegmentedControlState");var RepainterIcon="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAASOSURBVHgB7ZzLbtNMFMf/4/SjrfQJwhukK1iA4A0IO4SAmgVSWBGegPIEpE9AumKJ2UBhU0NYlBXhCQgSi7LCTwDlIlRQ6+FMHKcJvoyTjHMZz09K48vYiv8+njlzznEZJNi2XQZWqxx8nQNV2lTBXML26Td2GCzXgv/Sdbc9KICl7bxu396gBg8AXsaCQb/boc/mpELFCiSs5hArTQu4g8XGo2u4PIlIVtxGH8tvNRBHUPHB31+1b13EmEQEumHXGmRYY59w/mDlJZR2qt2+dHSGBLLtWgXdPkc7KiexOtZ1DQlEo8BDaAvfGMeK+gIJ6+FgNjTmf6zcw4j0BTrUqt+JhwV+3EhYxwv8AjSHgY9sBNbxwfPqIauElW0a8u0R+qIlFAwfpfdASbgzHhlF+wh48trdbie1t1BcaFBCnQR4u27XHvdcnAhFFqiPEMonoeI8biPQMZUlWBGRjEBDRKclRqAolUGH0ggUgzUwLSmcQN9xcJo65bu06CW3YmWa3K6Lpb5APPUAbfDarrvfcredPxRIE2HapIYcfrez7gvkg32A5gwawW4QZXSSW7NhgZaw3E5TVAcYmDO4TuEdqVH0BXJdR4jjQF+8P+DvBjdQBuSU7KChTppOsKWrFZGn7OxGgve+dNI6JJA4AcfRJvTDowlp5LrSwx+8I/5GhvmW+6JJXw3ogxeMWFE4rGrSQazXocf6Qa8CtRtYcGjUagtxdmPyYjR7r6YlRDmz4i0oRIhEJ18TMRMsHGyf8mEb5O/EiiPgqXk/vt/aedbt0FNTzyFXKFZyAtY6PbPV+U1DC1F8D8xyw4tLQsR+qNP+nLSfxHNIXOFtZ4so9u7CVu+z8JAAj1MbkMjhYuHmYiJzzNOzG15r5+nLcKVQAl23a3VIM8esMbSGghCU8kgzxx4NTmuDG7TPaogUj4/VBvU80qxqnL+krUCBMCsbFKW4l2XkpVGtEecSaPOIBcnA/ypHKF2kjvVSUGeQzSWhtm7LfXYzbt/ULSi8s8h4Z7Pi977FHefdJZ7xSN75gYO7SXunLhDHiugo69kvIE945zt+XxZRxqQWU33ExPxHJOgwB1CwrNlyn9+XtZuqH3Q0FwUS4TxNLo6gUMULwmqov9lMe6T+pQACdS2m+RMHW6MIE6KhQEHFfTcimGFmLyN3gcJhndz8CzRuZanw8ujjlBhrIyOcs2+Wha9f/F/fxrGSNHIdxYKa67HLiieukldBbgJds2uOgmr9mYuUyzAvLEfRqwyVWftNJSjGtutljsNHtKhqGlE+c/a892nv40xS48ot6BC/q1DsENKoVMeMUC6QmElDMePUN6tCuUAsl6wHm1kmxVSYSTACSTACSTACSTACSTACSTACSTACSTACSTACSTACSTACSTACSTACSVAuENesUj8HC2IelMM6mBE5RBRPPIF6mpgRygUSbw3RY6bygiJv6UyTXDrpEpY3VT0WnLH67gzzYsrTPoK9vc7B2tlzb0j9MsuWbo6BcuyMXZk0tz4puRdQidpkC6z3LwZlAf2g8EC8hDJuNYZq/gJxnYqknsYYAgAAAABJRU5ErkJggg==";/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*      http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function signum(num){return num<0?-1:num===0?0:1}function lerp(start,stop,amount){return(1-amount)*start+amount*stop}function clampInt(min,max,input){return input<min?min:input>max?max:input}function clampDouble(min,max,input){return input<min?min:input>max?max:input}function sanitizeDegreesDouble(degrees){return degrees=degrees%360,degrees<0&&(degrees=degrees+360),degrees}function matrixMultiply(row,matrix){const a=row[0]*matrix[0][0]+row[1]*matrix[0][1]+row[2]*matrix[0][2],b=row[0]*matrix[1][0]+row[1]*matrix[1][1]+row[2]*matrix[1][2],c=row[0]*matrix[2][0]+row[1]*matrix[2][1]+row[2]*matrix[2][2];return[a,b,c]}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*      http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const SRGB_TO_XYZ=[[.41233895,.35762064,.18051042],[.2126,.7152,.0722],[.01932141,.11916382,.95034478]],XYZ_TO_SRGB=[[3.2413774792388685,-1.5376652402851851,-.49885366846268053],[-.9691452513005321,1.8758853451067872,.04156585616912061],[.05562093689691305,-.20395524564742123,1.0571799111220335]],WHITE_POINT_D65=[95.047,100,108.883];function argbFromRgb(red,green,blue){return(255<<24|(red&255)<<16|(green&255)<<8|blue&255)>>>0}function argbFromLinrgb(linrgb){const r=delinearized(linrgb[0]),g=delinearized(linrgb[1]),b=delinearized(linrgb[2]);return argbFromRgb(r,g,b)}function redFromArgb(argb){return argb>>16&255}function greenFromArgb(argb){return argb>>8&255}function blueFromArgb(argb){return argb&255}function argbFromXyz(x,y,z){const matrix=XYZ_TO_SRGB,linearR=matrix[0][0]*x+matrix[0][1]*y+matrix[0][2]*z,linearG=matrix[1][0]*x+matrix[1][1]*y+matrix[1][2]*z,linearB=matrix[2][0]*x+matrix[2][1]*y+matrix[2][2]*z,r=delinearized(linearR),g=delinearized(linearG),b=delinearized(linearB);return argbFromRgb(r,g,b)}function xyzFromArgb(argb){const r=linearized(redFromArgb(argb)),g=linearized(greenFromArgb(argb)),b=linearized(blueFromArgb(argb));return matrixMultiply([r,g,b],SRGB_TO_XYZ)}function argbFromLstar(lstar){const y=yFromLstar(lstar),component=delinearized(y);return argbFromRgb(component,component,component)}function lstarFromArgb(argb){const y=xyzFromArgb(argb)[1];return 116*labF(y/100)-16}function yFromLstar(lstar){return 100*labInvf((lstar+16)/116)}function lstarFromY(y){return labF(y/100)*116-16}function linearized(rgbComponent){const normalized=rgbComponent/255;return normalized<=.040449936?normalized/12.92*100:Math.pow((normalized+.055)/1.055,2.4)*100}function delinearized(rgbComponent){const normalized=rgbComponent/100;let delinearized2=0;return normalized<=.0031308?delinearized2=normalized*12.92:delinearized2=1.055*Math.pow(normalized,1/2.4)-.055,clampInt(0,255,Math.round(delinearized2*255))}function whitePointD65(){return WHITE_POINT_D65}function labF(t){const e=.008856451679035631,kappa=24389/27;return t>e?Math.pow(t,1/3):(kappa*t+16)/116}function labInvf(ft){const e=.008856451679035631,kappa=24389/27,ft3=ft*ft*ft;return ft3>e?ft3:(116*ft-16)/kappa}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*      http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function _class_call_check$9(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties$8(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _create_class$8(Constructor,protoProps,staticProps){return staticProps&&_defineProperties$8(Constructor,staticProps),Constructor}let ViewingConditions=function(){function ViewingConditions2(n,aw,nbb,ncb,c,nc,rgbD,fl,fLRoot,z){_class_call_check$9(this,ViewingConditions2),this.n=n,this.aw=aw,this.nbb=nbb,this.ncb=ncb,this.c=c,this.nc=nc,this.rgbD=rgbD,this.fl=fl,this.fLRoot=fLRoot,this.z=z}return _create_class$8(ViewingConditions2,null,[{key:"make",value:function(){let whitePoint=arguments.length>0&&arguments[0]!==void 0?arguments[0]:whitePointD65(),adaptingLuminance=arguments.length>1&&arguments[1]!==void 0?arguments[1]:200/Math.PI*yFromLstar(50)/100,backgroundLstar=arguments.length>2&&arguments[2]!==void 0?arguments[2]:50,surround=arguments.length>3&&arguments[3]!==void 0?arguments[3]:2,discountingIlluminant=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;const xyz=whitePoint,rW=xyz[0]*.401288+xyz[1]*.650173+xyz[2]*-.051461,gW=xyz[0]*-.250268+xyz[1]*1.204414+xyz[2]*.045854,bW=xyz[0]*-.002079+xyz[1]*.048952+xyz[2]*.953127,f=.8+surround/10,c=f>=.9?lerp(.59,.69,(f-.9)*10):lerp(.525,.59,(f-.8)*10);let d=discountingIlluminant?1:f*(1-1/3.6*Math.exp((-adaptingLuminance-42)/92));d=d>1?1:d<0?0:d;const nc=f,rgbD=[d*(100/rW)+1-d,d*(100/gW)+1-d,d*(100/bW)+1-d],k=1/(5*adaptingLuminance+1),k4=k*k*k*k,k4F=1-k4,fl=k4*adaptingLuminance+.1*k4F*k4F*Math.cbrt(5*adaptingLuminance),n=yFromLstar(backgroundLstar)/whitePoint[1],z=1.48+Math.sqrt(n),nbb=.725/Math.pow(n,.2),ncb=nbb,rgbAFactors=[Math.pow(fl*rgbD[0]*rW/100,.42),Math.pow(fl*rgbD[1]*gW/100,.42),Math.pow(fl*rgbD[2]*bW/100,.42)],rgbA=[400*rgbAFactors[0]/(rgbAFactors[0]+27.13),400*rgbAFactors[1]/(rgbAFactors[1]+27.13),400*rgbAFactors[2]/(rgbAFactors[2]+27.13)],aw=(2*rgbA[0]+rgbA[1]+.05*rgbA[2])*nbb;return new ViewingConditions2(n,aw,nbb,ncb,c,nc,rgbD,fl,Math.pow(fl,.25),z)}}]),ViewingConditions2}();ViewingConditions.DEFAULT=ViewingConditions.make();/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*      http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function _class_call_check$8(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties$7(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _create_class$7(Constructor,protoProps,staticProps){return protoProps&&_defineProperties$7(Constructor.prototype,protoProps),staticProps&&_defineProperties$7(Constructor,staticProps),Constructor}let Cam16=function(){function Cam162(hue,chroma,j,q,m,s,jstar,astar,bstar){_class_call_check$8(this,Cam162),this.hue=hue,this.chroma=chroma,this.j=j,this.q=q,this.m=m,this.s=s,this.jstar=jstar,this.astar=astar,this.bstar=bstar}return _create_class$7(Cam162,[{key:"distance",value:function(other){const dJ=this.jstar-other.jstar,dA=this.astar-other.astar,dB=this.bstar-other.bstar,dEPrime=Math.sqrt(dJ*dJ+dA*dA+dB*dB);return 1.41*Math.pow(dEPrime,.63)}},{key:"toInt",value:function(){return this.viewed(ViewingConditions.DEFAULT)}},{key:"viewed",value:function(viewingConditions){const alpha=this.chroma===0||this.j===0?0:this.chroma/Math.sqrt(this.j/100),t=Math.pow(alpha/Math.pow(1.64-Math.pow(.29,viewingConditions.n),.73),1/.9),hRad=this.hue*Math.PI/180,eHue=.25*(Math.cos(hRad+2)+3.8),ac=viewingConditions.aw*Math.pow(this.j/100,1/viewingConditions.c/viewingConditions.z),p1=eHue*(5e4/13)*viewingConditions.nc*viewingConditions.ncb,p2=ac/viewingConditions.nbb,hSin=Math.sin(hRad),hCos=Math.cos(hRad),gamma=23*(p2+.305)*t/(23*p1+11*t*hCos+108*t*hSin),a=gamma*hCos,b=gamma*hSin,rA=(460*p2+451*a+288*b)/1403,gA=(460*p2-891*a-261*b)/1403,bA=(460*p2-220*a-6300*b)/1403,rCBase=Math.max(0,27.13*Math.abs(rA)/(400-Math.abs(rA))),rC=signum(rA)*(100/viewingConditions.fl)*Math.pow(rCBase,1/.42),gCBase=Math.max(0,27.13*Math.abs(gA)/(400-Math.abs(gA))),gC=signum(gA)*(100/viewingConditions.fl)*Math.pow(gCBase,1/.42),bCBase=Math.max(0,27.13*Math.abs(bA)/(400-Math.abs(bA))),bC=signum(bA)*(100/viewingConditions.fl)*Math.pow(bCBase,1/.42),rF=rC/viewingConditions.rgbD[0],gF=gC/viewingConditions.rgbD[1],bF=bC/viewingConditions.rgbD[2],x=1.86206786*rF-1.01125463*gF+.14918677*bF,y=.38752654*rF+.62144744*gF-.00897398*bF,z=-.0158415*rF-.03412294*gF+1.04996444*bF;return argbFromXyz(x,y,z)}},{key:"xyzInViewingConditions",value:function(viewingConditions){const alpha=this.chroma===0||this.j===0?0:this.chroma/Math.sqrt(this.j/100),t=Math.pow(alpha/Math.pow(1.64-Math.pow(.29,viewingConditions.n),.73),1/.9),hRad=this.hue*Math.PI/180,eHue=.25*(Math.cos(hRad+2)+3.8),ac=viewingConditions.aw*Math.pow(this.j/100,1/viewingConditions.c/viewingConditions.z),p1=eHue*(5e4/13)*viewingConditions.nc*viewingConditions.ncb,p2=ac/viewingConditions.nbb,hSin=Math.sin(hRad),hCos=Math.cos(hRad),gamma=23*(p2+.305)*t/(23*p1+11*t*hCos+108*t*hSin),a=gamma*hCos,b=gamma*hSin,rA=(460*p2+451*a+288*b)/1403,gA=(460*p2-891*a-261*b)/1403,bA=(460*p2-220*a-6300*b)/1403,rCBase=Math.max(0,27.13*Math.abs(rA)/(400-Math.abs(rA))),rC=signum(rA)*(100/viewingConditions.fl)*Math.pow(rCBase,1/.42),gCBase=Math.max(0,27.13*Math.abs(gA)/(400-Math.abs(gA))),gC=signum(gA)*(100/viewingConditions.fl)*Math.pow(gCBase,1/.42),bCBase=Math.max(0,27.13*Math.abs(bA)/(400-Math.abs(bA))),bC=signum(bA)*(100/viewingConditions.fl)*Math.pow(bCBase,1/.42),rF=rC/viewingConditions.rgbD[0],gF=gC/viewingConditions.rgbD[1],bF=bC/viewingConditions.rgbD[2],x=1.86206786*rF-1.01125463*gF+.14918677*bF,y=.38752654*rF+.62144744*gF-.00897398*bF,z=-.0158415*rF-.03412294*gF+1.04996444*bF;return[x,y,z]}}],[{key:"fromInt",value:function(argb){return Cam162.fromIntInViewingConditions(argb,ViewingConditions.DEFAULT)}},{key:"fromIntInViewingConditions",value:function(argb,viewingConditions){const red=(argb&16711680)>>16,green=(argb&65280)>>8,blue=argb&255,redL=linearized(red),greenL=linearized(green),blueL=linearized(blue),x=.41233895*redL+.35762064*greenL+.18051042*blueL,y=.2126*redL+.7152*greenL+.0722*blueL,z=.01932141*redL+.11916382*greenL+.95034478*blueL,rC=.401288*x+.650173*y-.051461*z,gC=-.250268*x+1.204414*y+.045854*z,bC=-.002079*x+.048952*y+.953127*z,rD=viewingConditions.rgbD[0]*rC,gD=viewingConditions.rgbD[1]*gC,bD=viewingConditions.rgbD[2]*bC,rAF=Math.pow(viewingConditions.fl*Math.abs(rD)/100,.42),gAF=Math.pow(viewingConditions.fl*Math.abs(gD)/100,.42),bAF=Math.pow(viewingConditions.fl*Math.abs(bD)/100,.42),rA=signum(rD)*400*rAF/(rAF+27.13),gA=signum(gD)*400*gAF/(gAF+27.13),bA=signum(bD)*400*bAF/(bAF+27.13),a=(11*rA+-12*gA+bA)/11,b=(rA+gA-2*bA)/9,u=(20*rA+20*gA+21*bA)/20,p2=(40*rA+20*gA+bA)/20,atanDegrees=Math.atan2(b,a)*180/Math.PI,hue=atanDegrees<0?atanDegrees+360:atanDegrees>=360?atanDegrees-360:atanDegrees,hueRadians=hue*Math.PI/180,ac=p2*viewingConditions.nbb,j=100*Math.pow(ac/viewingConditions.aw,viewingConditions.c*viewingConditions.z),q=4/viewingConditions.c*Math.sqrt(j/100)*(viewingConditions.aw+4)*viewingConditions.fLRoot,huePrime=hue<20.14?hue+360:hue,eHue=.25*(Math.cos(huePrime*Math.PI/180+2)+3.8),t=5e4/13*eHue*viewingConditions.nc*viewingConditions.ncb*Math.sqrt(a*a+b*b)/(u+.305),alpha=Math.pow(t,.9)*Math.pow(1.64-Math.pow(.29,viewingConditions.n),.73),c=alpha*Math.sqrt(j/100),m=c*viewingConditions.fLRoot,s=50*Math.sqrt(alpha*viewingConditions.c/(viewingConditions.aw+4)),jstar=(1+100*.007)*j/(1+.007*j),mstar=1/.0228*Math.log(1+.0228*m),astar=mstar*Math.cos(hueRadians),bstar=mstar*Math.sin(hueRadians);return new Cam162(hue,c,j,q,m,s,jstar,astar,bstar)}},{key:"fromJch",value:function(j,c,h){return Cam162.fromJchInViewingConditions(j,c,h,ViewingConditions.DEFAULT)}},{key:"fromJchInViewingConditions",value:function(j,c,h,viewingConditions){const q=4/viewingConditions.c*Math.sqrt(j/100)*(viewingConditions.aw+4)*viewingConditions.fLRoot,m=c*viewingConditions.fLRoot,alpha=c/Math.sqrt(j/100),s=50*Math.sqrt(alpha*viewingConditions.c/(viewingConditions.aw+4)),hueRadians=h*Math.PI/180,jstar=(1+100*.007)*j/(1+.007*j),mstar=1/.0228*Math.log(1+.0228*m),astar=mstar*Math.cos(hueRadians),bstar=mstar*Math.sin(hueRadians);return new Cam162(h,c,j,q,m,s,jstar,astar,bstar)}},{key:"fromUcs",value:function(jstar,astar,bstar){return Cam162.fromUcsInViewingConditions(jstar,astar,bstar,ViewingConditions.DEFAULT)}},{key:"fromUcsInViewingConditions",value:function(jstar,astar,bstar,viewingConditions){const a=astar,b=bstar,m=Math.sqrt(a*a+b*b),c=(Math.exp(m*.0228)-1)/.0228/viewingConditions.fLRoot;let h=Math.atan2(b,a)*(180/Math.PI);h<0&&(h+=360);const j=jstar/(1-(jstar-100)*.007);return Cam162.fromJchInViewingConditions(j,c,h,viewingConditions)}},{key:"fromXyzInViewingConditions",value:function(x,y,z,viewingConditions){const rC=.401288*x+.650173*y-.051461*z,gC=-.250268*x+1.204414*y+.045854*z,bC=-.002079*x+.048952*y+.953127*z,rD=viewingConditions.rgbD[0]*rC,gD=viewingConditions.rgbD[1]*gC,bD=viewingConditions.rgbD[2]*bC,rAF=Math.pow(viewingConditions.fl*Math.abs(rD)/100,.42),gAF=Math.pow(viewingConditions.fl*Math.abs(gD)/100,.42),bAF=Math.pow(viewingConditions.fl*Math.abs(bD)/100,.42),rA=signum(rD)*400*rAF/(rAF+27.13),gA=signum(gD)*400*gAF/(gAF+27.13),bA=signum(bD)*400*bAF/(bAF+27.13),a=(11*rA+-12*gA+bA)/11,b=(rA+gA-2*bA)/9,u=(20*rA+20*gA+21*bA)/20,p2=(40*rA+20*gA+bA)/20,atanDegrees=Math.atan2(b,a)*180/Math.PI,hue=atanDegrees<0?atanDegrees+360:atanDegrees>=360?atanDegrees-360:atanDegrees,hueRadians=hue*Math.PI/180,ac=p2*viewingConditions.nbb,J=100*Math.pow(ac/viewingConditions.aw,viewingConditions.c*viewingConditions.z),Q=4/viewingConditions.c*Math.sqrt(J/100)*(viewingConditions.aw+4)*viewingConditions.fLRoot,huePrime=hue<20.14?hue+360:hue,eHue=1/4*(Math.cos(huePrime*Math.PI/180+2)+3.8),t=5e4/13*eHue*viewingConditions.nc*viewingConditions.ncb*Math.sqrt(a*a+b*b)/(u+.305),alpha=Math.pow(t,.9)*Math.pow(1.64-Math.pow(.29,viewingConditions.n),.73),C=alpha*Math.sqrt(J/100),M=C*viewingConditions.fLRoot,s=50*Math.sqrt(alpha*viewingConditions.c/(viewingConditions.aw+4)),jstar=(1+100*.007)*J/(1+.007*J),mstar=Math.log(1+.0228*M)/.0228,astar=mstar*Math.cos(hueRadians),bstar=mstar*Math.sin(hueRadians);return new Cam162(hue,C,J,Q,M,s,jstar,astar,bstar)}}]),Cam162}();/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*      http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function _class_call_check$7(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties$6(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _create_class$6(Constructor,protoProps,staticProps){return staticProps&&_defineProperties$6(Constructor,staticProps),Constructor}let HctSolver=function(){function HctSolver2(){_class_call_check$7(this,HctSolver2)}return _create_class$6(HctSolver2,null,[{key:"sanitizeRadians",value:function(angle){return(angle+Math.PI*8)%(Math.PI*2)}},{key:"trueDelinearized",value:function(rgbComponent){const normalized=rgbComponent/100;let delinearized2=0;return normalized<=.0031308?delinearized2=normalized*12.92:delinearized2=1.055*Math.pow(normalized,1/2.4)-.055,delinearized2*255}},{key:"chromaticAdaptation",value:function(component){const af=Math.pow(Math.abs(component),.42);return signum(component)*400*af/(af+27.13)}},{key:"hueOf",value:function(linrgb){const scaledDiscount=matrixMultiply(linrgb,HctSolver2.SCALED_DISCOUNT_FROM_LINRGB),rA=HctSolver2.chromaticAdaptation(scaledDiscount[0]),gA=HctSolver2.chromaticAdaptation(scaledDiscount[1]),bA=HctSolver2.chromaticAdaptation(scaledDiscount[2]),a=(11*rA+-12*gA+bA)/11,b=(rA+gA-2*bA)/9;return Math.atan2(b,a)}},{key:"areInCyclicOrder",value:function(a,b,c){const deltaAB=HctSolver2.sanitizeRadians(b-a),deltaAC=HctSolver2.sanitizeRadians(c-a);return deltaAB<deltaAC}},{key:"intercept",value:function(source,mid,target){return(mid-source)/(target-source)}},{key:"lerpPoint",value:function(source,t,target){return[source[0]+(target[0]-source[0])*t,source[1]+(target[1]-source[1])*t,source[2]+(target[2]-source[2])*t]}},{key:"setCoordinate",value:function(source,coordinate,target,axis){const t=HctSolver2.intercept(source[axis],coordinate,target[axis]);return HctSolver2.lerpPoint(source,t,target)}},{key:"isBounded",value:function(x){return 0<=x&&x<=100}},{key:"nthVertex",value:function(y,n){const kR=HctSolver2.Y_FROM_LINRGB[0],kG=HctSolver2.Y_FROM_LINRGB[1],kB=HctSolver2.Y_FROM_LINRGB[2],coordA=n%4<=1?0:100,coordB=n%2===0?0:100;if(n<4){const g=coordA,b=coordB,r=(y-g*kG-b*kB)/kR;return HctSolver2.isBounded(r)?[r,g,b]:[-1,-1,-1]}else if(n<8){const b=coordA,r=coordB,g=(y-r*kR-b*kB)/kG;return HctSolver2.isBounded(g)?[r,g,b]:[-1,-1,-1]}else{const r=coordA,g=coordB,b=(y-r*kR-g*kG)/kB;return HctSolver2.isBounded(b)?[r,g,b]:[-1,-1,-1]}}},{key:"bisectToSegment",value:function(y,targetHue){let left=[-1,-1,-1],right=left,leftHue=0,rightHue=0,initialized=!1,uncut=!0;for(let n=0;n<12;n++){const mid=HctSolver2.nthVertex(y,n);if(mid[0]<0)continue;const midHue=HctSolver2.hueOf(mid);if(!initialized){left=mid,right=mid,leftHue=midHue,rightHue=midHue,initialized=!0;continue}(uncut||HctSolver2.areInCyclicOrder(leftHue,midHue,rightHue))&&(uncut=!1,HctSolver2.areInCyclicOrder(leftHue,targetHue,midHue)?(right=mid,rightHue=midHue):(left=mid,leftHue=midHue))}return[left,right]}},{key:"midpoint",value:function(a,b){return[(a[0]+b[0])/2,(a[1]+b[1])/2,(a[2]+b[2])/2]}},{key:"criticalPlaneBelow",value:function(x){return Math.floor(x-.5)}},{key:"criticalPlaneAbove",value:function(x){return Math.ceil(x-.5)}},{key:"bisectToLimit",value:function(y,targetHue){const segment=HctSolver2.bisectToSegment(y,targetHue);let left=segment[0],leftHue=HctSolver2.hueOf(left),right=segment[1];for(let axis=0;axis<3;axis++)if(left[axis]!==right[axis]){let lPlane=-1,rPlane=255;left[axis]<right[axis]?(lPlane=HctSolver2.criticalPlaneBelow(HctSolver2.trueDelinearized(left[axis])),rPlane=HctSolver2.criticalPlaneAbove(HctSolver2.trueDelinearized(right[axis]))):(lPlane=HctSolver2.criticalPlaneAbove(HctSolver2.trueDelinearized(left[axis])),rPlane=HctSolver2.criticalPlaneBelow(HctSolver2.trueDelinearized(right[axis])));for(let i=0;i<8&&!(Math.abs(rPlane-lPlane)<=1);i++){const mPlane=Math.floor((lPlane+rPlane)/2),midPlaneCoordinate=HctSolver2.CRITICAL_PLANES[mPlane],mid=HctSolver2.setCoordinate(left,midPlaneCoordinate,right,axis),midHue=HctSolver2.hueOf(mid);HctSolver2.areInCyclicOrder(leftHue,targetHue,midHue)?(right=mid,rPlane=mPlane):(left=mid,leftHue=midHue,lPlane=mPlane)}}return HctSolver2.midpoint(left,right)}},{key:"inverseChromaticAdaptation",value:function(adapted){const adaptedAbs=Math.abs(adapted),base=Math.max(0,27.13*adaptedAbs/(400-adaptedAbs));return signum(adapted)*Math.pow(base,1/.42)}},{key:"findResultByJ",value:function(hueRadians,chroma,y){let j=Math.sqrt(y)*11;const viewingConditions=ViewingConditions.DEFAULT,tInnerCoeff=1/Math.pow(1.64-Math.pow(.29,viewingConditions.n),.73),p1=.25*(Math.cos(hueRadians+2)+3.8)*(5e4/13)*viewingConditions.nc*viewingConditions.ncb,hSin=Math.sin(hueRadians),hCos=Math.cos(hueRadians);for(let iterationRound=0;iterationRound<5;iterationRound++){const jNormalized=j/100,alpha=chroma===0||j===0?0:chroma/Math.sqrt(jNormalized),t=Math.pow(alpha*tInnerCoeff,1/.9),p2=viewingConditions.aw*Math.pow(jNormalized,1/viewingConditions.c/viewingConditions.z)/viewingConditions.nbb,gamma=23*(p2+.305)*t/(23*p1+11*t*hCos+108*t*hSin),a=gamma*hCos,b=gamma*hSin,rA=(460*p2+451*a+288*b)/1403,gA=(460*p2-891*a-261*b)/1403,bA=(460*p2-220*a-6300*b)/1403,rCScaled=HctSolver2.inverseChromaticAdaptation(rA),gCScaled=HctSolver2.inverseChromaticAdaptation(gA),bCScaled=HctSolver2.inverseChromaticAdaptation(bA),linrgb=matrixMultiply([rCScaled,gCScaled,bCScaled],HctSolver2.LINRGB_FROM_SCALED_DISCOUNT);if(linrgb[0]<0||linrgb[1]<0||linrgb[2]<0)return 0;const kR=HctSolver2.Y_FROM_LINRGB[0],kG=HctSolver2.Y_FROM_LINRGB[1],kB=HctSolver2.Y_FROM_LINRGB[2],fnj=kR*linrgb[0]+kG*linrgb[1]+kB*linrgb[2];if(fnj<=0)return 0;if(iterationRound===4||Math.abs(fnj-y)<.002)return linrgb[0]>100.01||linrgb[1]>100.01||linrgb[2]>100.01?0:argbFromLinrgb(linrgb);j=j-(fnj-y)*j/(2*fnj)}return 0}},{key:"solveToInt",value:function(hueDegrees,chroma,lstar){if(chroma<1e-4||lstar<1e-4||lstar>99.9999)return argbFromLstar(lstar);hueDegrees=sanitizeDegreesDouble(hueDegrees);const hueRadians=hueDegrees/180*Math.PI,y=yFromLstar(lstar),exactAnswer=HctSolver2.findResultByJ(hueRadians,chroma,y);if(exactAnswer!==0)return exactAnswer;const linrgb=HctSolver2.bisectToLimit(y,hueRadians);return argbFromLinrgb(linrgb)}},{key:"solveToCam",value:function(hueDegrees,chroma,lstar){return Cam16.fromInt(HctSolver2.solveToInt(hueDegrees,chroma,lstar))}}]),HctSolver2}();HctSolver.SCALED_DISCOUNT_FROM_LINRGB=[[.001200833568784504,.002389694492170889,.0002795742885861124],[.0005891086651375999,.0029785502573438758,.0003270666104008398],[.00010146692491640572,.0005364214359186694,.0032979401770712076]],HctSolver.LINRGB_FROM_SCALED_DISCOUNT=[[1373.2198709594231,-1100.4251190754821,-7.278681089101213],[-271.815969077903,559.6580465940733,-32.46047482791194],[1.9622899599665666,-57.173814538844006,308.7233197812385]],HctSolver.Y_FROM_LINRGB=[.2126,.7152,.0722],HctSolver.CRITICAL_PLANES=[.015176349177441876,.045529047532325624,.07588174588720938,.10623444424209313,.13658714259697685,.16693984095186062,.19729253930674434,.2276452376616281,.2579979360165119,.28835063437139563,.3188300904430532,.350925934958123,.3848314933096426,.42057480301049466,.458183274052838,.4976837250274023,.5391024159806381,.5824650784040898,.6277969426914107,.6751227633498623,.7244668422128921,.775853049866786,.829304845476233,.8848452951698498,.942497089126609,1.0022825574869039,1.0642236851973577,1.1283421258858297,1.1946592148522128,1.2631959812511864,1.3339731595349034,1.407011200216447,1.4823302800086415,1.5599503113873272,1.6398909516233677,1.7221716113234105,1.8068114625156377,1.8938294463134073,1.9832442801866852,2.075074464868551,2.1693382909216234,2.2660538449872063,2.36523901573795,2.4669114995532007,2.5710888059345764,2.6777882626779785,2.7870270208169257,2.898822059350997,3.0131901897720907,3.1301480604002863,3.2497121605402226,3.3718988244681087,3.4967242352587946,3.624204428461639,3.754355295633311,3.887192587735158,4.022731918402185,4.160988767090289,4.301978482107941,4.445716283538092,4.592217266055746,4.741496401646282,4.893568542229298,5.048448422192488,5.20615066083972,5.3666897647573375,5.5300801301023865,5.696336044816294,5.865471690767354,6.037501145825082,6.212438385869475,6.390297286737924,6.571091626112461,6.7548350853498045,6.941541251256611,7.131223617812143,7.323895587840543,7.5195704746346665,7.7182615035334345,7.919981813454504,8.124744458384042,8.332562408825165,8.543448553206703,8.757415699253682,8.974476575321063,9.194643831691977,9.417930041841839,9.644347703669503,9.873909240696694,10.106627003236781,10.342513269534024,10.58158024687427,10.8238400726681,11.069304815507364,11.317986476196008,11.569896988756009,11.825048221409341,12.083451977536606,12.345119996613247,12.610063955123938,12.878295467455942,13.149826086772048,13.42466730586372,13.702830557985108,13.984327217668513,14.269168601521828,14.55736596900856,14.848930523210871,15.143873411576273,15.44220572664832,15.743938506781891,16.04908273684337,16.35764934889634,16.66964922287304,16.985093187232053,17.30399201960269,17.62635644741625,17.95219714852476,18.281524751807332,18.614349837764564,18.95068293910138,19.290534541298456,19.633915083172692,19.98083495742689,20.331304511189067,20.685334046541502,21.042933821039977,21.404114048223256,21.76888489811322,22.137256497705877,22.50923893145328,22.884842241736916,23.264076429332462,23.6469514538663,24.033477234264016,24.42366364919083,24.817520537484558,25.21505769858089,25.61628489293138,26.021211842414342,26.429848230738664,26.842203703840827,27.258287870275353,27.678110301598522,28.10168053274597,28.529008062403893,28.96010235337422,29.39497283293396,29.83362889318845,30.276079891419332,30.722335150426627,31.172403958865512,31.62629557157785,32.08401920991837,32.54558406207592,33.010999283389665,33.4802739966603,33.953417292456834,34.430438229418264,34.911345834551085,35.39614910352207,35.88485700094671,36.37747846067349,36.87402238606382,37.37449765026789,37.87891309649659,38.38727753828926,38.89959975977785,39.41588851594697,39.93615253289054,40.460400508064545,40.98864111053629,41.520882981230194,42.05713473317016,42.597404951718396,43.141702194811224,43.6900349931913,44.24241185063697,44.798841244188324,45.35933162437017,45.92389141541209,46.49252901546552,47.065252796817916,47.64207110610409,48.22299226451468,48.808024568002054,49.3971762874833,49.9904556690408,50.587870934119984,51.189430279724725,51.79514187861014,52.40501387947288,53.0190544071392,53.637271562750364,54.259673423945976,54.88626804504493,55.517063457223934,56.15206766869424,56.79128866487574,57.43473440856916,58.08241284012621,58.734331877617365,59.39049941699807,60.05092333227251,60.715611475655585,61.38457167773311,62.057811747619894,62.7353394731159,63.417162620860914,64.10328893648692,64.79372614476921,65.48848194977529,66.18756403501224,66.89098006357258,67.59873767827808,68.31084450182222,69.02730813691093,69.74813616640164,70.47333615344107,71.20291564160104,71.93688215501312,72.67524319850172,73.41800625771542,74.16517879925733,74.9167682708136,75.67278210128072,76.43322770089146,77.1981124613393,77.96744375590167,78.74122893956174,79.51947534912904,80.30219030335869,81.08938110306934,81.88105503125999,82.67721935322541,83.4778813166706,84.28304815182372,85.09272707154808,85.90692527145302,86.72564993000343,87.54890820862819,88.3767072518277,89.2090541872801,90.04595612594655,90.88742016217518,91.73345337380438,92.58406282226491,93.43925555268066,94.29903859396902,95.16341895893969,96.03240364439274,96.9059996312159,97.78421388448044,98.6670533535366,99.55452497210776];/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*      http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function _class_call_check$6(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties$5(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _create_class$5(Constructor,protoProps,staticProps){return protoProps&&_defineProperties$5(Constructor.prototype,protoProps),staticProps&&_defineProperties$5(Constructor,staticProps),Constructor}let Hct=function(){function Hct2(argb){_class_call_check$6(this,Hct2),this.argb=argb;const cam=Cam16.fromInt(argb);this.internalHue=cam.hue,this.internalChroma=cam.chroma,this.internalTone=lstarFromArgb(argb),this.argb=argb}return _create_class$5(Hct2,[{key:"toInt",value:function(){return this.argb}},{key:"hue",get:function(){return this.internalHue},set:function(newHue){this.setInternalState(HctSolver.solveToInt(newHue,this.internalChroma,this.internalTone))}},{key:"chroma",get:function(){return this.internalChroma},set:function(newChroma){this.setInternalState(HctSolver.solveToInt(this.internalHue,newChroma,this.internalTone))}},{key:"tone",get:function(){return this.internalTone},set:function(newTone){this.setInternalState(HctSolver.solveToInt(this.internalHue,this.internalChroma,newTone))}},{key:"setInternalState",value:function(argb){const cam=Cam16.fromInt(argb);this.internalHue=cam.hue,this.internalChroma=cam.chroma,this.internalTone=lstarFromArgb(argb),this.argb=argb}},{key:"inViewingConditions",value:function(vc){const viewedInVc=Cam16.fromInt(this.toInt()).xyzInViewingConditions(vc),recastInVc=Cam16.fromXyzInViewingConditions(viewedInVc[0],viewedInVc[1],viewedInVc[2],ViewingConditions.make());return Hct2.from(recastInVc.hue,recastInVc.chroma,lstarFromY(viewedInVc[1]))}}],[{key:"from",value:function(hue,chroma,tone){return new Hct2(HctSolver.solveToInt(hue,chroma,tone))}},{key:"fromInt",value:function(argb){return new Hct2(argb)}}]),Hct2}();/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*      http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function _class_call_check$5(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties$4(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _create_class$4(Constructor,protoProps,staticProps){return staticProps&&_defineProperties$4(Constructor,staticProps),Constructor}let Contrast=function(){function Contrast2(){_class_call_check$5(this,Contrast2)}return _create_class$4(Contrast2,null,[{key:"ratioOfTones",value:function(toneA,toneB){return toneA=clampDouble(0,100,toneA),toneB=clampDouble(0,100,toneB),Contrast2.ratioOfYs(yFromLstar(toneA),yFromLstar(toneB))}},{key:"ratioOfYs",value:function(y1,y2){const lighter=y1>y2?y1:y2,darker=lighter===y2?y1:y2;return(lighter+5)/(darker+5)}},{key:"lighter",value:function(tone,ratio){if(tone<0||tone>100)return-1;const darkY=yFromLstar(tone),lightY=ratio*(darkY+5)-5,realContrast=Contrast2.ratioOfYs(lightY,darkY),delta=Math.abs(realContrast-ratio);if(realContrast<ratio&&delta>.04)return-1;const returnValue=lstarFromY(lightY)+.4;return returnValue<0||returnValue>100?-1:returnValue}},{key:"darker",value:function(tone,ratio){if(tone<0||tone>100)return-1;const lightY=yFromLstar(tone),darkY=(lightY+5)/ratio-5,realContrast=Contrast2.ratioOfYs(lightY,darkY),delta=Math.abs(realContrast-ratio);if(realContrast<ratio&&delta>.04)return-1;const returnValue=lstarFromY(darkY)-.4;return returnValue<0||returnValue>100?-1:returnValue}},{key:"lighterUnsafe",value:function(tone,ratio){const lighterSafe=Contrast2.lighter(tone,ratio);return lighterSafe<0?100:lighterSafe}},{key:"darkerUnsafe",value:function(tone,ratio){const darkerSafe=Contrast2.darker(tone,ratio);return darkerSafe<0?0:darkerSafe}}]),Contrast2}();/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*      http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function _class_call_check$4(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties$3(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _create_class$3(Constructor,protoProps,staticProps){return staticProps&&_defineProperties$3(Constructor,staticProps),Constructor}let DislikeAnalyzer=function(){function DislikeAnalyzer2(){_class_call_check$4(this,DislikeAnalyzer2)}return _create_class$3(DislikeAnalyzer2,null,[{key:"isDisliked",value:function(hct){const huePasses=Math.round(hct.hue)>=90&&Math.round(hct.hue)<=111,chromaPasses=Math.round(hct.chroma)>16,tonePasses=Math.round(hct.tone)<65;return huePasses&&chromaPasses&&tonePasses}},{key:"fixIfDisliked",value:function(hct){return DislikeAnalyzer2.isDisliked(hct)?Hct.from(hct.hue,hct.chroma,70):hct}}]),DislikeAnalyzer2}();/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*      http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function _class_call_check$3(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties$2(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _create_class$2(Constructor,protoProps,staticProps){return protoProps&&_defineProperties$2(Constructor.prototype,protoProps),staticProps&&_defineProperties$2(Constructor,staticProps),Constructor}let DynamicColor=function(){function DynamicColor2(name,palette,tone,isBackground,background,secondBackground,contrastCurve,toneDeltaPair){if(_class_call_check$3(this,DynamicColor2),this.name=name,this.palette=palette,this.tone=tone,this.isBackground=isBackground,this.background=background,this.secondBackground=secondBackground,this.contrastCurve=contrastCurve,this.toneDeltaPair=toneDeltaPair,this.hctCache=new Map,!background&&secondBackground)throw new Error(`Color ${name} has secondBackgrounddefined, but background is not defined.`);if(!background&&contrastCurve)throw new Error(`Color ${name} has contrastCurvedefined, but background is not defined.`);if(background&&!contrastCurve)throw new Error(`Color ${name} has backgrounddefined, but contrastCurve is not defined.`)}return _create_class$2(DynamicColor2,[{key:"getArgb",value:function(scheme){return this.getHct(scheme).toInt()}},{key:"getHct",value:function(scheme){const cachedAnswer=this.hctCache.get(scheme);if(cachedAnswer!=null)return cachedAnswer;const tone=this.getTone(scheme),answer=this.palette(scheme).getHct(tone);return this.hctCache.size>4&&this.hctCache.clear(),this.hctCache.set(scheme,answer),answer}},{key:"getTone",value:function(scheme){const decreasingContrast=scheme.contrastLevel<0;if(this.toneDeltaPair){const toneDeltaPair=this.toneDeltaPair(scheme),roleA=toneDeltaPair.roleA,roleB=toneDeltaPair.roleB,delta=toneDeltaPair.delta,polarity=toneDeltaPair.polarity,stayTogether=toneDeltaPair.stayTogether,bgTone=this.background(scheme).getTone(scheme),aIsNearer=polarity==="nearer"||polarity==="lighter"&&!scheme.isDark||polarity==="darker"&&scheme.isDark,nearer=aIsNearer?roleA:roleB,farther=aIsNearer?roleB:roleA,amNearer=this.name===nearer.name,expansionDir=scheme.isDark?1:-1,nContrast=nearer.contrastCurve.getContrast(scheme.contrastLevel),fContrast=farther.contrastCurve.getContrast(scheme.contrastLevel),nInitialTone=nearer.tone(scheme);let nTone=Contrast.ratioOfTones(bgTone,nInitialTone)>=nContrast?nInitialTone:DynamicColor2.foregroundTone(bgTone,nContrast);const fInitialTone=farther.tone(scheme);let fTone=Contrast.ratioOfTones(bgTone,fInitialTone)>=fContrast?fInitialTone:DynamicColor2.foregroundTone(bgTone,fContrast);return decreasingContrast&&(nTone=DynamicColor2.foregroundTone(bgTone,nContrast),fTone=DynamicColor2.foregroundTone(bgTone,fContrast)),(fTone-nTone)*expansionDir>=delta||(fTone=clampDouble(0,100,nTone+delta*expansionDir),(fTone-nTone)*expansionDir>=delta||(nTone=clampDouble(0,100,fTone-delta*expansionDir))),50<=nTone&&nTone<60?expansionDir>0?(nTone=60,fTone=Math.max(fTone,nTone+delta*expansionDir)):(nTone=49,fTone=Math.min(fTone,nTone+delta*expansionDir)):50<=fTone&&fTone<60&&(stayTogether?expansionDir>0?(nTone=60,fTone=Math.max(fTone,nTone+delta*expansionDir)):(nTone=49,fTone=Math.min(fTone,nTone+delta*expansionDir)):expansionDir>0?fTone=60:fTone=49),amNearer?nTone:fTone}else{let answer=this.tone(scheme);if(this.background==null)return answer;const bgTone=this.background(scheme).getTone(scheme),desiredRatio=this.contrastCurve.getContrast(scheme.contrastLevel);if(Contrast.ratioOfTones(bgTone,answer)>=desiredRatio||(answer=DynamicColor2.foregroundTone(bgTone,desiredRatio)),decreasingContrast&&(answer=DynamicColor2.foregroundTone(bgTone,desiredRatio)),this.isBackground&&50<=answer&&answer<60&&(Contrast.ratioOfTones(49,bgTone)>=desiredRatio?answer=49:answer=60),this.secondBackground){const[bg1,bg2]=[this.background,this.secondBackground],[bgTone1,bgTone2]=[bg1(scheme).getTone(scheme),bg2(scheme).getTone(scheme)],[upper,lower]=[Math.max(bgTone1,bgTone2),Math.min(bgTone1,bgTone2)];if(Contrast.ratioOfTones(upper,answer)>=desiredRatio&&Contrast.ratioOfTones(lower,answer)>=desiredRatio)return answer;const lightOption=Contrast.lighter(upper,desiredRatio),darkOption=Contrast.darker(lower,desiredRatio),availables=[];return lightOption!==-1&&availables.push(lightOption),darkOption!==-1&&availables.push(darkOption),DynamicColor2.tonePrefersLightForeground(bgTone1)||DynamicColor2.tonePrefersLightForeground(bgTone2)?lightOption<0?100:lightOption:availables.length===1?availables[0]:darkOption<0?0:darkOption}return answer}}}],[{key:"fromPalette",value:function(args){return new DynamicColor2(args.name??"",args.palette,args.tone,args.isBackground??!1,args.background,args.secondBackground,args.contrastCurve,args.toneDeltaPair)}},{key:"foregroundTone",value:function(bgTone,ratio){const lighterTone=Contrast.lighterUnsafe(bgTone,ratio),darkerTone=Contrast.darkerUnsafe(bgTone,ratio),lighterRatio=Contrast.ratioOfTones(lighterTone,bgTone),darkerRatio=Contrast.ratioOfTones(darkerTone,bgTone);if(DynamicColor2.tonePrefersLightForeground(bgTone)){const negligibleDifference=Math.abs(lighterRatio-darkerRatio)<.1&&lighterRatio<ratio&&darkerRatio<ratio;return lighterRatio>=ratio||lighterRatio>=darkerRatio||negligibleDifference?lighterTone:darkerTone}else return darkerRatio>=ratio||darkerRatio>=lighterRatio?darkerTone:lighterTone}},{key:"tonePrefersLightForeground",value:function(tone){return Math.round(tone)<60}},{key:"toneAllowsLightForeground",value:function(tone){return Math.round(tone)<=49}},{key:"enableLightForeground",value:function(tone){return DynamicColor2.tonePrefersLightForeground(tone)&&!DynamicColor2.toneAllowsLightForeground(tone)?49:tone}}]),DynamicColor2}();/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*      http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Variant;(function(Variant2){Variant2[Variant2.MONOCHROME=0]="MONOCHROME",Variant2[Variant2.NEUTRAL=1]="NEUTRAL",Variant2[Variant2.TONAL_SPOT=2]="TONAL_SPOT",Variant2[Variant2.VIBRANT=3]="VIBRANT",Variant2[Variant2.EXPRESSIVE=4]="EXPRESSIVE",Variant2[Variant2.FIDELITY=5]="FIDELITY",Variant2[Variant2.CONTENT=6]="CONTENT",Variant2[Variant2.RAINBOW=7]="RAINBOW",Variant2[Variant2.FRUIT_SALAD=8]="FRUIT_SALAD"})(Variant||(Variant={}));/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*      http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function _class_call_check$2(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties$1(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _create_class$1(Constructor,protoProps,staticProps){return protoProps&&_defineProperties$1(Constructor.prototype,protoProps),Constructor}let ContrastCurve=function(){function ContrastCurve2(low,normal,medium,high){_class_call_check$2(this,ContrastCurve2),this.low=low,this.normal=normal,this.medium=medium,this.high=high}return _create_class$1(ContrastCurve2,[{key:"getContrast",value:function(contrastLevel){return contrastLevel<=-1?this.low:contrastLevel<0?lerp(this.low,this.normal,(contrastLevel- -1)/1):contrastLevel<.5?lerp(this.normal,this.medium,(contrastLevel-0)/.5):contrastLevel<1?lerp(this.medium,this.high,(contrastLevel-.5)/.5):this.high}}]),ContrastCurve2}();/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*      http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function _class_call_check$1(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}let ToneDeltaPair=function ToneDeltaPair2(roleA,roleB,delta,polarity,stayTogether){_class_call_check$1(this,ToneDeltaPair2),this.roleA=roleA,this.roleB=roleB,this.delta=delta,this.polarity=polarity,this.stayTogether=stayTogether};/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*      http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function _class_call_check(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _create_class(Constructor,protoProps,staticProps){return staticProps&&_defineProperties(Constructor,staticProps),Constructor}function isFidelity(scheme){return scheme.variant===Variant.FIDELITY||scheme.variant===Variant.CONTENT}function isMonochrome(scheme){return scheme.variant===Variant.MONOCHROME}function findDesiredChromaByTone(hue,chroma,tone,byDecreasingTone){let answer=tone,closestToChroma=Hct.from(hue,chroma,tone);if(closestToChroma.chroma<chroma){let chromaPeak=closestToChroma.chroma;for(;closestToChroma.chroma<chroma;){answer+=byDecreasingTone?-1:1;const potentialSolution=Hct.from(hue,chroma,answer);if(chromaPeak>potentialSolution.chroma||Math.abs(potentialSolution.chroma-chroma)<.4)break;const potentialDelta=Math.abs(potentialSolution.chroma-chroma),currentDelta=Math.abs(closestToChroma.chroma-chroma);potentialDelta<currentDelta&&(closestToChroma=potentialSolution),chromaPeak=Math.max(chromaPeak,potentialSolution.chroma)}}return answer}function viewingConditionsForAlbers(scheme){return ViewingConditions.make(void 0,void 0,scheme.isDark?30:80,void 0,void 0)}function performAlbers(prealbers,scheme){const albersd=prealbers.inViewingConditions(viewingConditionsForAlbers(scheme));return DynamicColor.tonePrefersLightForeground(prealbers.tone)&&!DynamicColor.toneAllowsLightForeground(albersd.tone)?DynamicColor.enableLightForeground(prealbers.tone):DynamicColor.enableLightForeground(albersd.tone)}let MaterialDynamicColors=function(){function MaterialDynamicColors2(){_class_call_check(this,MaterialDynamicColors2)}return _create_class(MaterialDynamicColors2,null,[{key:"highestSurface",value:function(s){return s.isDark?MaterialDynamicColors2.surfaceBright:MaterialDynamicColors2.surfaceDim}}]),MaterialDynamicColors2}();MaterialDynamicColors.contentAccentToneDelta=15,MaterialDynamicColors.primaryPaletteKeyColor=DynamicColor.fromPalette({name:"primary_palette_key_color",palette:function(s){return s.primaryPalette},tone:function(s){return s.primaryPalette.keyColor.tone}}),MaterialDynamicColors.secondaryPaletteKeyColor=DynamicColor.fromPalette({name:"secondary_palette_key_color",palette:function(s){return s.secondaryPalette},tone:function(s){return s.secondaryPalette.keyColor.tone}}),MaterialDynamicColors.tertiaryPaletteKeyColor=DynamicColor.fromPalette({name:"tertiary_palette_key_color",palette:function(s){return s.tertiaryPalette},tone:function(s){return s.tertiaryPalette.keyColor.tone}}),MaterialDynamicColors.neutralPaletteKeyColor=DynamicColor.fromPalette({name:"neutral_palette_key_color",palette:function(s){return s.neutralPalette},tone:function(s){return s.neutralPalette.keyColor.tone}}),MaterialDynamicColors.neutralVariantPaletteKeyColor=DynamicColor.fromPalette({name:"neutral_variant_palette_key_color",palette:function(s){return s.neutralVariantPalette},tone:function(s){return s.neutralVariantPalette.keyColor.tone}}),MaterialDynamicColors.background=DynamicColor.fromPalette({name:"background",palette:function(s){return s.neutralPalette},tone:function(s){return s.isDark?6:98},isBackground:!0}),MaterialDynamicColors.onBackground=DynamicColor.fromPalette({name:"on_background",palette:function(s){return s.neutralPalette},tone:function(s){return s.isDark?90:10},background:function(s){return MaterialDynamicColors.background},contrastCurve:new ContrastCurve(3,3,4.5,7)}),MaterialDynamicColors.surface=DynamicColor.fromPalette({name:"surface",palette:function(s){return s.neutralPalette},tone:function(s){return s.isDark?6:98},isBackground:!0}),MaterialDynamicColors.surfaceDim=DynamicColor.fromPalette({name:"surface_dim",palette:function(s){return s.neutralPalette},tone:function(s){return s.isDark?6:87},isBackground:!0}),MaterialDynamicColors.surfaceBright=DynamicColor.fromPalette({name:"surface_bright",palette:function(s){return s.neutralPalette},tone:function(s){return s.isDark?24:98},isBackground:!0}),MaterialDynamicColors.surfaceContainerLowest=DynamicColor.fromPalette({name:"surface_container_lowest",palette:function(s){return s.neutralPalette},tone:function(s){return s.isDark?4:100},isBackground:!0}),MaterialDynamicColors.surfaceContainerLow=DynamicColor.fromPalette({name:"surface_container_low",palette:function(s){return s.neutralPalette},tone:function(s){return s.isDark?10:96},isBackground:!0}),MaterialDynamicColors.surfaceContainer=DynamicColor.fromPalette({name:"surface_container",palette:function(s){return s.neutralPalette},tone:function(s){return s.isDark?12:94},isBackground:!0}),MaterialDynamicColors.surfaceContainerHigh=DynamicColor.fromPalette({name:"surface_container_high",palette:function(s){return s.neutralPalette},tone:function(s){return s.isDark?17:92},isBackground:!0}),MaterialDynamicColors.surfaceContainerHighest=DynamicColor.fromPalette({name:"surface_container_highest",palette:function(s){return s.neutralPalette},tone:function(s){return s.isDark?22:90},isBackground:!0}),MaterialDynamicColors.onSurface=DynamicColor.fromPalette({name:"on_surface",palette:function(s){return s.neutralPalette},tone:function(s){return s.isDark?90:10},background:function(s){return MaterialDynamicColors.highestSurface(s)},contrastCurve:new ContrastCurve(4.5,7,11,21)}),MaterialDynamicColors.surfaceVariant=DynamicColor.fromPalette({name:"surface_variant",palette:function(s){return s.neutralVariantPalette},tone:function(s){return s.isDark?30:90},isBackground:!0}),MaterialDynamicColors.onSurfaceVariant=DynamicColor.fromPalette({name:"on_surface_variant",palette:function(s){return s.neutralVariantPalette},tone:function(s){return s.isDark?80:30},background:function(s){return MaterialDynamicColors.highestSurface(s)},contrastCurve:new ContrastCurve(3,4.5,7,11)}),MaterialDynamicColors.inverseSurface=DynamicColor.fromPalette({name:"inverse_surface",palette:function(s){return s.neutralPalette},tone:function(s){return s.isDark?90:20}}),MaterialDynamicColors.inverseOnSurface=DynamicColor.fromPalette({name:"inverse_on_surface",palette:function(s){return s.neutralPalette},tone:function(s){return s.isDark?20:95},background:function(s){return MaterialDynamicColors.inverseSurface},contrastCurve:new ContrastCurve(4.5,7,11,21)}),MaterialDynamicColors.outline=DynamicColor.fromPalette({name:"outline",palette:function(s){return s.neutralVariantPalette},tone:function(s){return s.isDark?60:50},background:function(s){return MaterialDynamicColors.highestSurface(s)},contrastCurve:new ContrastCurve(1.5,3,4.5,7)}),MaterialDynamicColors.outlineVariant=DynamicColor.fromPalette({name:"outline_variant",palette:function(s){return s.neutralVariantPalette},tone:function(s){return s.isDark?30:80},background:function(s){return MaterialDynamicColors.highestSurface(s)},contrastCurve:new ContrastCurve(1,1,3,7)}),MaterialDynamicColors.shadow=DynamicColor.fromPalette({name:"shadow",palette:function(s){return s.neutralPalette},tone:function(s){return 0}}),MaterialDynamicColors.scrim=DynamicColor.fromPalette({name:"scrim",palette:function(s){return s.neutralPalette},tone:function(s){return 0}}),MaterialDynamicColors.surfaceTint=DynamicColor.fromPalette({name:"surface_tint",palette:function(s){return s.primaryPalette},tone:function(s){return s.isDark?80:40},isBackground:!0}),MaterialDynamicColors.primary=DynamicColor.fromPalette({name:"primary",palette:function(s){return s.primaryPalette},tone:function(s){return isMonochrome(s)?s.isDark?100:0:s.isDark?80:40},isBackground:!0,background:function(s){return MaterialDynamicColors.highestSurface(s)},contrastCurve:new ContrastCurve(3,4.5,7,11),toneDeltaPair:function(s){return new ToneDeltaPair(MaterialDynamicColors.primaryContainer,MaterialDynamicColors.primary,15,"nearer",!1)}}),MaterialDynamicColors.onPrimary=DynamicColor.fromPalette({name:"on_primary",palette:function(s){return s.primaryPalette},tone:function(s){return isMonochrome(s)?s.isDark?10:90:s.isDark?20:100},background:function(s){return MaterialDynamicColors.primary},contrastCurve:new ContrastCurve(4.5,7,11,21)}),MaterialDynamicColors.primaryContainer=DynamicColor.fromPalette({name:"primary_container",palette:function(s){return s.primaryPalette},tone:function(s){return isFidelity(s)?performAlbers(s.sourceColorHct,s):isMonochrome(s)?s.isDark?85:25:s.isDark?30:90},isBackground:!0,background:function(s){return MaterialDynamicColors.highestSurface(s)},contrastCurve:new ContrastCurve(1,1,3,7),toneDeltaPair:function(s){return new ToneDeltaPair(MaterialDynamicColors.primaryContainer,MaterialDynamicColors.primary,15,"nearer",!1)}}),MaterialDynamicColors.onPrimaryContainer=DynamicColor.fromPalette({name:"on_primary_container",palette:function(s){return s.primaryPalette},tone:function(s){return isFidelity(s)?DynamicColor.foregroundTone(MaterialDynamicColors.primaryContainer.tone(s),4.5):isMonochrome(s)?s.isDark?0:100:s.isDark?90:10},background:function(s){return MaterialDynamicColors.primaryContainer},contrastCurve:new ContrastCurve(4.5,7,11,21)}),MaterialDynamicColors.inversePrimary=DynamicColor.fromPalette({name:"inverse_primary",palette:function(s){return s.primaryPalette},tone:function(s){return s.isDark?40:80},background:function(s){return MaterialDynamicColors.inverseSurface},contrastCurve:new ContrastCurve(3,4.5,7,11)}),MaterialDynamicColors.secondary=DynamicColor.fromPalette({name:"secondary",palette:function(s){return s.secondaryPalette},tone:function(s){return s.isDark?80:40},isBackground:!0,background:function(s){return MaterialDynamicColors.highestSurface(s)},contrastCurve:new ContrastCurve(3,4.5,7,11),toneDeltaPair:function(s){return new ToneDeltaPair(MaterialDynamicColors.secondaryContainer,MaterialDynamicColors.secondary,15,"nearer",!1)}}),MaterialDynamicColors.onSecondary=DynamicColor.fromPalette({name:"on_secondary",palette:function(s){return s.secondaryPalette},tone:function(s){return isMonochrome(s)?s.isDark?10:100:s.isDark?20:100},background:function(s){return MaterialDynamicColors.secondary},contrastCurve:new ContrastCurve(4.5,7,11,21)}),MaterialDynamicColors.secondaryContainer=DynamicColor.fromPalette({name:"secondary_container",palette:function(s){return s.secondaryPalette},tone:function(s){const initialTone=s.isDark?30:90;if(isMonochrome(s))return s.isDark?30:85;if(!isFidelity(s))return initialTone;let answer=findDesiredChromaByTone(s.secondaryPalette.hue,s.secondaryPalette.chroma,initialTone,!s.isDark);return answer=performAlbers(s.secondaryPalette.getHct(answer),s),answer},isBackground:!0,background:function(s){return MaterialDynamicColors.highestSurface(s)},contrastCurve:new ContrastCurve(1,1,3,7),toneDeltaPair:function(s){return new ToneDeltaPair(MaterialDynamicColors.secondaryContainer,MaterialDynamicColors.secondary,15,"nearer",!1)}}),MaterialDynamicColors.onSecondaryContainer=DynamicColor.fromPalette({name:"on_secondary_container",palette:function(s){return s.secondaryPalette},tone:function(s){return isFidelity(s)?DynamicColor.foregroundTone(MaterialDynamicColors.secondaryContainer.tone(s),4.5):s.isDark?90:10},background:function(s){return MaterialDynamicColors.secondaryContainer},contrastCurve:new ContrastCurve(4.5,7,11,21)}),MaterialDynamicColors.tertiary=DynamicColor.fromPalette({name:"tertiary",palette:function(s){return s.tertiaryPalette},tone:function(s){return isMonochrome(s)?s.isDark?90:25:s.isDark?80:40},isBackground:!0,background:function(s){return MaterialDynamicColors.highestSurface(s)},contrastCurve:new ContrastCurve(3,4.5,7,11),toneDeltaPair:function(s){return new ToneDeltaPair(MaterialDynamicColors.tertiaryContainer,MaterialDynamicColors.tertiary,15,"nearer",!1)}}),MaterialDynamicColors.onTertiary=DynamicColor.fromPalette({name:"on_tertiary",palette:function(s){return s.tertiaryPalette},tone:function(s){return isMonochrome(s)?s.isDark?10:90:s.isDark?20:100},background:function(s){return MaterialDynamicColors.tertiary},contrastCurve:new ContrastCurve(4.5,7,11,21)}),MaterialDynamicColors.tertiaryContainer=DynamicColor.fromPalette({name:"tertiary_container",palette:function(s){return s.tertiaryPalette},tone:function(s){if(isMonochrome(s))return s.isDark?60:49;if(!isFidelity(s))return s.isDark?30:90;const albersTone=performAlbers(s.tertiaryPalette.getHct(s.sourceColorHct.tone),s),proposedHct=s.tertiaryPalette.getHct(albersTone);return DislikeAnalyzer.fixIfDisliked(proposedHct).tone},isBackground:!0,background:function(s){return MaterialDynamicColors.highestSurface(s)},contrastCurve:new ContrastCurve(1,1,3,7),toneDeltaPair:function(s){return new ToneDeltaPair(MaterialDynamicColors.tertiaryContainer,MaterialDynamicColors.tertiary,15,"nearer",!1)}}),MaterialDynamicColors.onTertiaryContainer=DynamicColor.fromPalette({name:"on_tertiary_container",palette:function(s){return s.tertiaryPalette},tone:function(s){return isMonochrome(s)?s.isDark?0:100:isFidelity(s)?DynamicColor.foregroundTone(MaterialDynamicColors.tertiaryContainer.tone(s),4.5):s.isDark?90:10},background:function(s){return MaterialDynamicColors.tertiaryContainer},contrastCurve:new ContrastCurve(4.5,7,11,21)}),MaterialDynamicColors.error=DynamicColor.fromPalette({name:"error",palette:function(s){return s.errorPalette},tone:function(s){return s.isDark?80:40},isBackground:!0,background:function(s){return MaterialDynamicColors.highestSurface(s)},contrastCurve:new ContrastCurve(3,4.5,7,11),toneDeltaPair:function(s){return new ToneDeltaPair(MaterialDynamicColors.errorContainer,MaterialDynamicColors.error,15,"nearer",!1)}}),MaterialDynamicColors.onError=DynamicColor.fromPalette({name:"on_error",palette:function(s){return s.errorPalette},tone:function(s){return s.isDark?20:100},background:function(s){return MaterialDynamicColors.error},contrastCurve:new ContrastCurve(4.5,7,11,21)}),MaterialDynamicColors.errorContainer=DynamicColor.fromPalette({name:"error_container",palette:function(s){return s.errorPalette},tone:function(s){return s.isDark?30:90},isBackground:!0,background:function(s){return MaterialDynamicColors.highestSurface(s)},contrastCurve:new ContrastCurve(1,1,3,7),toneDeltaPair:function(s){return new ToneDeltaPair(MaterialDynamicColors.errorContainer,MaterialDynamicColors.error,15,"nearer",!1)}}),MaterialDynamicColors.onErrorContainer=DynamicColor.fromPalette({name:"on_error_container",palette:function(s){return s.errorPalette},tone:function(s){return s.isDark?90:10},background:function(s){return MaterialDynamicColors.errorContainer},contrastCurve:new ContrastCurve(4.5,7,11,21)}),MaterialDynamicColors.primaryFixed=DynamicColor.fromPalette({name:"primary_fixed",palette:function(s){return s.primaryPalette},tone:function(s){return isMonochrome(s)?40:90},isBackground:!0,background:function(s){return MaterialDynamicColors.highestSurface(s)},contrastCurve:new ContrastCurve(1,1,3,7),toneDeltaPair:function(s){return new ToneDeltaPair(MaterialDynamicColors.primaryFixed,MaterialDynamicColors.primaryFixedDim,10,"lighter",!0)}}),MaterialDynamicColors.primaryFixedDim=DynamicColor.fromPalette({name:"primary_fixed_dim",palette:function(s){return s.primaryPalette},tone:function(s){return isMonochrome(s)?30:80},isBackground:!0,background:function(s){return MaterialDynamicColors.highestSurface(s)},contrastCurve:new ContrastCurve(1,1,3,7),toneDeltaPair:function(s){return new ToneDeltaPair(MaterialDynamicColors.primaryFixed,MaterialDynamicColors.primaryFixedDim,10,"lighter",!0)}}),MaterialDynamicColors.onPrimaryFixed=DynamicColor.fromPalette({name:"on_primary_fixed",palette:function(s){return s.primaryPalette},tone:function(s){return isMonochrome(s)?100:10},background:function(s){return MaterialDynamicColors.primaryFixedDim},secondBackground:function(s){return MaterialDynamicColors.primaryFixed},contrastCurve:new ContrastCurve(4.5,7,11,21)}),MaterialDynamicColors.onPrimaryFixedVariant=DynamicColor.fromPalette({name:"on_primary_fixed_variant",palette:function(s){return s.primaryPalette},tone:function(s){return isMonochrome(s)?90:30},background:function(s){return MaterialDynamicColors.primaryFixedDim},secondBackground:function(s){return MaterialDynamicColors.primaryFixed},contrastCurve:new ContrastCurve(3,4.5,7,11)}),MaterialDynamicColors.secondaryFixed=DynamicColor.fromPalette({name:"secondary_fixed",palette:function(s){return s.secondaryPalette},tone:function(s){return isMonochrome(s)?80:90},isBackground:!0,background:function(s){return MaterialDynamicColors.highestSurface(s)},contrastCurve:new ContrastCurve(1,1,3,7),toneDeltaPair:function(s){return new ToneDeltaPair(MaterialDynamicColors.secondaryFixed,MaterialDynamicColors.secondaryFixedDim,10,"lighter",!0)}}),MaterialDynamicColors.secondaryFixedDim=DynamicColor.fromPalette({name:"secondary_fixed_dim",palette:function(s){return s.secondaryPalette},tone:function(s){return isMonochrome(s)?70:80},isBackground:!0,background:function(s){return MaterialDynamicColors.highestSurface(s)},contrastCurve:new ContrastCurve(1,1,3,7),toneDeltaPair:function(s){return new ToneDeltaPair(MaterialDynamicColors.secondaryFixed,MaterialDynamicColors.secondaryFixedDim,10,"lighter",!0)}}),MaterialDynamicColors.onSecondaryFixed=DynamicColor.fromPalette({name:"on_secondary_fixed",palette:function(s){return s.secondaryPalette},tone:function(s){return 10},background:function(s){return MaterialDynamicColors.secondaryFixedDim},secondBackground:function(s){return MaterialDynamicColors.secondaryFixed},contrastCurve:new ContrastCurve(4.5,7,11,21)}),MaterialDynamicColors.onSecondaryFixedVariant=DynamicColor.fromPalette({name:"on_secondary_fixed_variant",palette:function(s){return s.secondaryPalette},tone:function(s){return isMonochrome(s)?25:30},background:function(s){return MaterialDynamicColors.secondaryFixedDim},secondBackground:function(s){return MaterialDynamicColors.secondaryFixed},contrastCurve:new ContrastCurve(3,4.5,7,11)}),MaterialDynamicColors.tertiaryFixed=DynamicColor.fromPalette({name:"tertiary_fixed",palette:function(s){return s.tertiaryPalette},tone:function(s){return isMonochrome(s)?40:90},isBackground:!0,background:function(s){return MaterialDynamicColors.highestSurface(s)},contrastCurve:new ContrastCurve(1,1,3,7),toneDeltaPair:function(s){return new ToneDeltaPair(MaterialDynamicColors.tertiaryFixed,MaterialDynamicColors.tertiaryFixedDim,10,"lighter",!0)}}),MaterialDynamicColors.tertiaryFixedDim=DynamicColor.fromPalette({name:"tertiary_fixed_dim",palette:function(s){return s.tertiaryPalette},tone:function(s){return isMonochrome(s)?30:80},isBackground:!0,background:function(s){return MaterialDynamicColors.highestSurface(s)},contrastCurve:new ContrastCurve(1,1,3,7),toneDeltaPair:function(s){return new ToneDeltaPair(MaterialDynamicColors.tertiaryFixed,MaterialDynamicColors.tertiaryFixedDim,10,"lighter",!0)}}),MaterialDynamicColors.onTertiaryFixed=DynamicColor.fromPalette({name:"on_tertiary_fixed",palette:function(s){return s.tertiaryPalette},tone:function(s){return isMonochrome(s)?100:10},background:function(s){return MaterialDynamicColors.tertiaryFixedDim},secondBackground:function(s){return MaterialDynamicColors.tertiaryFixed},contrastCurve:new ContrastCurve(4.5,7,11,21)}),MaterialDynamicColors.onTertiaryFixedVariant=DynamicColor.fromPalette({name:"on_tertiary_fixed_variant",palette:function(s){return s.tertiaryPalette},tone:function(s){return isMonochrome(s)?90:30},background:function(s){return MaterialDynamicColors.tertiaryFixedDim},secondBackground:function(s){return MaterialDynamicColors.tertiaryFixed},contrastCurve:new ContrastCurve(3,4.5,7,11)});function hexFromArgb(argb){const r=redFromArgb(argb),g=greenFromArgb(argb),b=blueFromArgb(argb),outParts=[r.toString(16),g.toString(16),b.toString(16)];for(const[i,part]of outParts.entries())part.length===1&&(outParts[i]="0"+part);return"#"+outParts.join("")}function argbFromHex(hex){hex=hex.replace("#","");const isThree=hex.length===3,isSix=hex.length===6,isEight=hex.length===8;if(!isThree&&!isSix&&!isEight)throw new Error("unexpected hex "+hex);let r=0,g=0,b=0;return isThree?(r=parseIntHex(hex.slice(0,1).repeat(2)),g=parseIntHex(hex.slice(1,2).repeat(2)),b=parseIntHex(hex.slice(2,3).repeat(2))):isSix?(r=parseIntHex(hex.slice(0,2)),g=parseIntHex(hex.slice(2,4)),b=parseIntHex(hex.slice(4,6))):isEight&&(r=parseIntHex(hex.slice(2,4)),g=parseIntHex(hex.slice(4,6)),b=parseIntHex(hex.slice(6,8))),(255<<24|(r&255)<<16|(g&255)<<8|b&255)>>>0}function parseIntHex(value){return parseInt(value,16)}function parseColor(clr){const shade=Number(clr.split("_")[1]);if(ui.rawColors[clr])return ui.rawColors[clr];if(clr.startsWith("N1_"))return getLABShade(vstorage.colors.neutral1,500-shade+500);if(clr.startsWith("N2_"))return getLABShade(vstorage.colors.neutral2,500-shade+500);if(clr.startsWith("A1_"))return getLABShade(vstorage.colors.accent1,500-shade+500);if(clr.startsWith("A2_"))return getLABShade(vstorage.colors.accent2,500-shade+500);if(clr.startsWith("A3_"))return getLABShade(vstorage.colors.accent3,500-shade+500);if(clr.match(/^#(?:[0-9a-f]{6})|(?:[0-9a-f]{3})$/i))return clr}function getLABShade(color,shade,mult){mult??(mult=1);const hct=Hct.fromInt(argbFromHex(color));return hct.tone+=(500-shade)/10*mult,hexFromArgb(hct.toInt())}function apply(theme){const bunny=window.bunny,val=theme?{id:"monet-theme",selected:!1,data:theme}:null;try{return bunny.managers.themes.selectTheme(val),bunny.managers.themes.applyTheme(val),val?toasts.showToast("Applied theme",assets.getAssetIDByName("PaintPaletteIcon")):toasts.showToast("Cleared theme",assets.getAssetIDByName("TrashIcon")),!0}catch(e){toasts.showToast("Couldn't apply theme!",assets.getAssetIDByName("Small")),_vendetta.logger.error(`Failed to apply theme!
${e.stack}`)}}function build(patches2){const theme={name:"Material You Theme 2.0",description:"A Bunny theme with Material You theming.",authors:[{name:"nexpid",id:"853550207039832084"}],semanticColors:{},rawColors:{},spec:2},style=getDiscordTheme(),get=function(lk){return Object.assign(lk.both,style==="light"?lk.light:lk.dark)},entries=function(obj){return Object.entries(obj)},checkShouldPut=function(shade,checks){let shouldPut=!0;for(const c of checks){if(!shouldPut)break;c.startsWith(">=")?shouldPut=shade>=Number(c.slice(2)):c.startsWith("<=")?shouldPut=shade<=Number(c.slice(2)):c.startsWith(">")?shouldPut=shade>Number(c.slice(1)):c.startsWith("<")&&(shouldPut=shade<Number(c.slice(1)))}return shouldPut};if(patches2.version===3)for(const[x,y]of entries(get(patches2.replacers))){const clr=parseColor(y.color);if(clr)for(const c of Object.keys(ui.rawColors).filter(function(l){return l.startsWith(`${x.split("_")[0]}_`)})){const shade=Number(c.split("_")[1]);if(!checkShouldPut(shade,x.split("_").slice(1)))continue;const useShade=y.alternative?Math.floor(shade/26*1e3):shade;theme.rawColors[c]=getLABShade(clr,y.base?useShade+(500-y.base):useShade,y.ratio)}}for(const[x,y]of entries(get(patches2.raw)))theme.rawColors[x]=parseColor(y);for(const[x,y]of Object.entries(patches2.semantic.both))theme.semanticColors[x]=[parseColor(y),parseColor(y)];for(const[x,y]of Object.entries(patches2.semantic.dark))theme.semanticColors[x]?theme.semanticColors[x][0]=parseColor(y):theme.semanticColors[x]=[parseColor(y)];for(const[x,y]of Object.entries(patches2.semantic.light))theme.semanticColors[x]?theme.semanticColors[x][1]=parseColor(y):theme.semanticColors[x]=[void 0,parseColor(y)];if(vstorage.config.wallpaper!=="none"&&(theme.background={url:vstorage.config.wallpaper,alpha:1}),patches2.version===3&&patches2.plus){theme.plus={customOverlays:!0,version:0,icons:{}};for(const[x,y]of entries(get(patches2.plus.icons)))theme.plus.icons[x]=parseColor(y)}return JSON.parse(JSON.stringify(theme))}function parse(json){return JSON.parse(json.replace(/\r/g,"").replace(/\/\/.*$/gm,"").replace(/\/\*(?:.|\n)*?(?=\*\/)\*\//g,""))}function checkForURL(text){var _text_match;return(_text_match=text.match(constants$1.HTTP_REGEX_MULTI))===null||_text_match===void 0?void 0:_text_match.filter(function(x){return x.startsWith("https://repainter.app/themes/")})[0]}async function fetchRawTheme(link){var _link_match;return await(await utils.safeFetch(`https://repainter.app/_next/data/Z0BCpVYZyrdkss0k0zqLC/themes/${((_link_match=link.match(/themes\/([a-z0-9]+)/i))===null||_link_match===void 0?void 0:_link_match[1])??""}.json`,{cache:"no-store"})).json()}function parseTheme(theme){const data=Object.values(theme.pageProps.fallback)[0];if(!data)throw new Error("Invalid Repainter theme!");const parseClr=function(clr){return(clr&16777215).toString(16).padStart(6,"0")},mapped=data.colors.map(function(x){return`#${parseClr(x)}`});return{name:data.name,description:data.description,createdAt:new Date(data.createdAt),updatedAt:new Date(data.updatedAt),settings:data.settingsLines,likes:data.voteCount,colors:{neutral1:mapped[44],neutral2:mapped[57],accent1:mapped[5],accent2:mapped[18],accent3:mapped[31]}}}const{View:View$4,Pressable:Pressable$2}=components.General,CustomColorPickerActionSheet=metro.findByName("CustomColorPickerActionSheet");function Color(param){let{title,color,update}=param;const styles=common.stylesheet.createThemedStyleSheet({androidRipple:{color:ui.semanticColors.ANDROID_RIPPLE,cornerRadius:2147483647}});return React.createElement(View$4,{style:{flexDirection:"column",alignItems:"center",justifyContent:"center",flex:1/5}},React.createElement(Pressable$2,{android_ripple:styles.androidRipple,disabled:!1,accessibilityRole:"button",accessibilityState:{disabled:!1,expanded:!1},accessibilityLabel:`${title} Color Preview`,accessibilityHint:`Shows the ${title} color used in this theme`,style:{width:48,aspectRatio:1,backgroundColor:color,borderRadius:2147483647,marginBottom:8},onPress:function(){return openSheet(CustomColorPickerActionSheet,{color:parseInt(color.slice(1),16),onSelect:function(clr){return update(`#${clr.toString(16).padStart(6,"0")}`)}})},onLongPress:function(){common.clipboard.setString(color),toasts.showToast("Copied",assets.getAssetIDByName("toast_copy_message"))}}),React.createElement(Text,{variant:"text-sm/semibold",color:"TEXT_NORMAL",align:"center"},title))}const{View:View$3,Pressable:Pressable$1}=components.General;function Commit(param){let{commit,list,highlight,onPress,onLongPress}=param;const styles=common.stylesheet.createThemedStyleSheet({androidRipple:{color:ui.semanticColors.ANDROID_RIPPLE,cornerRadius:8},container:{backgroundColor:ui.semanticColors.BG_MOD_FAINT,flexDirection:"column",borderRadius:8},containerHighlight:{backgroundColor:ui.semanticColors.BG_MOD_STRONG}}),UseComponent=onPress||onLongPress?Pressable$1:View$3;return React.createElement(View$3,{style:list?{paddingHorizontal:12,paddingTop:12}:{paddingHorizontal:16,paddingTop:16}},React.createElement(UseComponent,{android_ripple:styles.androidRipple,disabled:!1,accessibilityRole:"button",accessibilityState:{disabled:!1,expanded:!1},accessibilityLabel:"Commit",onPress:function(){return onPress?.()},onLongPress:function(){return onLongPress?.()},style:[styles.container,highlight&&styles.containerHighlight]},React.createElement(View$3,{style:{marginHorizontal:12,marginVertical:12}},React.createElement(View$3,{style:{flexDirection:"row",marginBottom:4}},React.createElement(common.ReactNative.Image,{style:{width:20,height:20,borderRadius:2147483647,marginRight:8},source:{uri:commit.committer.avatar_url}}),React.createElement(Text,{style:{marginRight:8},variant:"text-sm/semibold",color:"TEXT_NORMAL"},commit.committer.login),React.createElement(Text,{style:{marginRight:8},variant:"text-sm/semibold",color:"TEXT_NORMAL"},"\u2022"),React.createElement(Text,{color:"TEXT_NORMAL",style:{fontFamily:common.constants.Fonts.CODE_SEMIBOLD||common.constants.Fonts.CODE_NORMAL}},commit.sha.slice(0,7))),React.createElement(Text,{variant:"text-md/semibold",color:"TEXT_NORMAL"},commit.commit.message))))}const{showSimpleActionSheet:showSimpleActionSheet$1}=metro.findByProps("showSimpleActionSheet"),{ScrollView:ScrollView$2,View:View$2}=components.General,CommitsPage=function(){storage.useProxy(vstorage);const styles=common.stylesheet.createThemedStyleSheet({window:{height:"100%",backgroundColor:ui.semanticColors.BG_BASE_SECONDARY}});return React.createElement(ScrollView$2,{style:styles.window},stsCommits?React.createElement(React.Fragment,null,stsCommits.map(function(x){return React.createElement(Commit,{commit:x,list:!0,onPress:function(){return common.url.openURL(x.html_url)},highlight:vstorage.patches.commit===x.sha,onLongPress:function(){return showSimpleActionSheet$1({key:"CardOverflow",header:{title:x.commit.message,onClose:function(){return LazyActionSheet.hideActionSheet()}},options:[vstorage.patches.commit!==x.sha?{label:"Use commit as patches",onPress:function(){toasts.showToast(`Using commit ${x.sha.slice(0,7)}`,assets.getAssetIDByName("ThreadIcon")),vstorage.patches.commit=x.sha}}:{label:"Don't use commit as patches",isDestructive:!0,onPress:function(){toasts.showToast("Using latest commit",assets.getAssetIDByName("ThreadPlusIcon")),delete vstorage.patches.commit}}]})}})}),React.createElement(View$2,{style:{height:12}})):React.createElement(common.ReactNative.ActivityIndicator,{style:{flex:1}}))};function openCommitsPage(navigation){navigation.push("VendettaCustomPage",{render:CommitsPage,title:"Commits"})}var constants={github:{url:"https://github.com/nexpid/BunnyPlugins/",raw:"https://raw.githubusercontent.com/nexpid/BunnyPlugins/main/"}};const prefix=`${constants.github.raw}plugins/monet-theme/assets/backgrounds/`;var wallpapers=[{label:"Pixel 4 XL",variant:"any",content:[{title:"Cinnamon",url:prefix+"pixel4l/cinnamon.png"},{title:"Default",url:prefix+"pixel4l/default.png"},{title:"Green",url:prefix+"pixel4l/green.png"},{title:"Ocean",url:prefix+"pixel4l/ocean.png"},{title:"Orchid",url:prefix+"pixel4l/orchid.png"},{title:"Purple",url:prefix+"pixel4l/purple.png"},{title:"Space",url:prefix+"pixel4l/space.png"},{title:"White",url:prefix+"pixel4l/white.png"}]}];const{View:View$1,ScrollView:ScrollView$1}=components.General,ConfigurePage=function(){storage.useProxy(vstorage);const styles=common.stylesheet.createThemedStyleSheet({thing:{backgroundColor:ui.semanticColors.BG_MOD_FAINT,borderRadius:8,aspectRatio:1/2},thingActive:{backgroundColor:ui.semanticColors.BG_MOD_STRONG},emptyThing:{padding:12,alignItems:"center",justifyContent:"center",gap:8},androidRipple:{color:ui.semanticColors.ANDROID_RIPPLE,cornerRadius:8},window:{height:"100%",backgroundColor:ui.semanticColors.BG_BASE_SECONDARY}});if(!stsPatches)return common.React.createElement(ScrollView$1,{style:styles.window},common.React.createElement(common.ReactNative.ActivityIndicator,{size:"large",style:{flex:1}}));const bestVariant=getDiscordTheme()!=="light"?"dark":"light",collections=wallpapers.filter(function(x){return x.variant===bestVariant||x.variant==="any"}),dims=common.ReactNative.Dimensions.get("window");return common.React.createElement(ScrollView$1,{style:styles.window},common.React.createElement(BetterTableRowGroup,{title:"Backgrounds",icon:assets.getAssetIDByName("ImageIcon"),padding:!0},collections.map(function(x,i,a){return common.React.createElement(View$1,{style:{marginBottom:i!==a.length-1?8:0}},common.React.createElement(View$1,{style:{marginBottom:8}},common.React.createElement(Text,{variant:"eyebrow",color:"TEXT_NORMAL"},x.label)),common.React.createElement(ScrollView$1,{horizontal:!0},common.React.createElement(View$1,{style:{marginRight:8,flexDirection:"column"}},common.React.createElement(common.ReactNative.TouchableOpacity,{onPress:function(){toasts.showToast("Removed background",assets.getAssetIDByName("TrashIcon")),vstorage.config.wallpaper="none"},style:[styles.thing,vstorage.config.wallpaper==="none"&&styles.thingActive,styles.emptyThing,{width:dims.width/4}]},common.React.createElement(common.ReactNative.Image,{source:assets.getAssetIDByName("EyeSlashIcon"),style:{width:"100%",aspectRatio:1/1,tintColor:resolveSemanticColor(ui.semanticColors.TEXT_NORMAL)}})),common.React.createElement(Text,{variant:"text-sm/semibold",color:"TEXT_NORMAL",align:"center",style:{marginTop:8}},"None")),x.content.map(function(x2){return common.React.createElement(View$1,{style:{marginRight:8,flexDirection:"column"}},common.React.createElement(common.ReactNative.TouchableOpacity,{onPress:function(){toasts.showToast(`Set background to ${x2.title}`,assets.getAssetIDByName("ImagePlusIcon")),vstorage.config.wallpaper=x2.url},style:[styles.thing,vstorage.config.wallpaper===x2.url&&styles.thingActive,{width:dims.width/4}]},common.React.createElement(common.ReactNative.Image,{source:{uri:x2.url},style:{borderRadius:8,width:"100%",height:"100%"}})),common.React.createElement(Text,{variant:"text-sm/semibold",color:"TEXT_NORMAL",align:"center",style:{marginTop:8}},x2.title))})))})),common.React.createElement(View$1,{style:{marginBottom:12}}))};function openConfigurePage(navigation){navigation.push("VendettaCustomPage",{title:"Theme Config",render:ConfigurePage})}const{ScrollView,View,Pressable}=components.General,{FormRow,FormSwitchRow}=components.Forms,{showSimpleActionSheet}=metro.findByProps("showSimpleActionSheet"),IconButton=metro.findByProps("IconButton").IconButton;function setColorsFromDynamic(clr){vstorage.colors={neutral1:clr.neutral1[7],neutral2:clr.neutral2[7],accent1:clr.accent1[7],accent2:clr.accent2[7],accent3:clr.accent3[7]}}let stsCommits,stsPatches;function settings(){const navigation=common.NavigationNative.useNavigation(),[commits,setCommits]=common.React.useState(void 0),[patches2,setPatches]=common.React.useState(void 0);stsCommits=commits,stsPatches=patches2;const[isLoadedTheme,setIsLoadedTheme]=common.React.useState(hasTheme());storage.useProxy(vstorage);const styles=common.stylesheet.createThemedStyleSheet({pill:{flexDirection:"row",alignItems:"center",paddingHorizontal:6,paddingVertical:4,backgroundColor:ui.semanticColors.BG_MOD_SUBTLE,borderRadius:8},androidRipple:{color:ui.semanticColors.ANDROID_RIPPLE,cornerRadius:8},help:{width:16,height:16,tintColor:ui.semanticColors.TEXT_BRAND,marginRight:4},labelIcon:{width:14,height:14,marginRight:6,tintColor:ui.semanticColors.TEXT_NORMAL}});common.React.useEffect(function(){utils.safeFetch(vstorage.patches.from==="local"?devPatchesURL:patchesURL(),{headers:{"cache-control":"public, max-age=120"}}).then(function(x){return x.text().then(function(text){try{setPatches(parse(text.replace(/\r/g,"")))}catch{return toasts.showToast("Failed to parse color patches!",assets.getAssetIDByName("Small"))}})}).catch(function(){return toasts.showToast("Failed to fetch color patches!",assets.getAssetIDByName("Small"))})},[patches2]),common.React.useEffect(function(){utils.safeFetch(commitsURL,{headers:{"cache-control":"public, max-age=3600"}}).then(function(x){return x.json().then(function(x2){return setCommits(x2)}).catch(function(){return toasts.showToast("Failed to parse GitHub commits!",assets.getAssetIDByName("Small"))})}).catch(function(){return toasts.showToast("Failed to fetch GitHub commits!",assets.getAssetIDByName("Small"))})},[commits]);let showMessage;const debug$1=debug.getDebugInfo(),syscolors=getSysColors();debug$1.os.name!=="Android"?showMessage="Dynamic colors are only available on Android.":debug$1.os.sdk<31?showMessage="Dynamic colors are only available on Android 12+ (SDK 31+).":syscolors===null&&(showMessage="Dynamic colors are unavailable.");let lastThemePressTime=0;return common.React.createElement(ScrollView,{style:{flex:1}},showMessage&&common.React.createElement(View,{style:{flexDirection:"row",alignItems:"center",justifyContent:"center",marginTop:8}},common.React.createElement(common.ReactNative.Image,{source:assets.getAssetIDByName("CircleInformationIcon"),style:styles.help}),common.React.createElement(Text,{variant:"text-md/semibold",color:"TEXT_BRAND"},showMessage)),common.React.createElement(BetterTableRowGroup,{title:"Colors",icon:assets.getAssetIDByName("PaintPaletteIcon"),padding:!0},common.React.createElement(View,{style:{marginBottom:8,flexDirection:"row",alignItems:"center",justifyContent:"center"}},syscolors&&common.React.createElement(Pressable,{android_ripple:styles.androidRipple,style:styles.pill,onPress:function(){setColorsFromDynamic(syscolors),toasts.showToast("Autofilled colors",assets.getAssetIDByName("PencilSparkleIcon"))}},common.React.createElement(common.ReactNative.Image,{source:assets.getAssetIDByName("PencilSparkleIcon"),style:styles.labelIcon,resizeMode:"cover"}),common.React.createElement(Text,{variant:"text-sm/semibold",color:"TEXT_NORMAL"},"Autofill")),syscolors&&common.React.createElement(Text,{variant:"text-sm/semibold",color:"TEXT_NORMAL",style:{marginHorizontal:6}},"\u2022"),common.React.createElement(Pressable,{android_ripple:styles.androidRipple,style:styles.pill,onPress:async function(){const link=checkForURL(await common.clipboard.getString()??"");alerts.showInputAlert({title:"Enter Repainter link",placeholder:"https://repainter.app/themes/123ABC",initialValue:link,confirmText:"Use",onConfirm:async function(i){const link2=checkForURL(i);if(!link2)throw new Error("No Repainter link found!");const theme=parseTheme(await fetchRawTheme(link2));vstorage.colors=theme.colors,toasts.showToast("Imported Repainter theme",{uri:RepainterIcon})},confirmColor:"brand",cancelText:"Cancel"})}},common.React.createElement(common.ReactNative.Image,{source:{uri:RepainterIcon},style:styles.labelIcon,resizeMode:"cover"}),common.React.createElement(Text,{variant:"text-sm/semibold",color:"TEXT_NORMAL"},"Use Repainter theme"))),common.React.createElement(View,{style:{flexDirection:"row",alignItems:"center",justifyContent:"center"}},common.React.createElement(Color,{title:`Neutral
`,color:vstorage.colors.neutral1,update:function(c){return vstorage.colors.neutral1=c}}),common.React.createElement(Color,{title:`Neutral
Variant`,color:vstorage.colors.neutral2,update:function(c){return vstorage.colors.neutral2=c}}),common.React.createElement(Color,{title:`Primary
`,color:vstorage.colors.accent1,update:function(c){return vstorage.colors.accent1=c}}),common.React.createElement(Color,{title:`Secondary
`,color:vstorage.colors.accent2,update:function(c){return vstorage.colors.accent2=c}}),common.React.createElement(Color,{title:`Tertiary
`,color:vstorage.colors.accent3,update:function(c){return vstorage.colors.accent3=c}}))),common.React.createElement(BetterTableRowGroup,{title:"Theme",icon:assets.getAssetIDByName("SettingsIcon"),padding:!patches2,onTitlePress:function(){if(lastThemePressTime>=Date.now()){lastThemePressTime=0;const otter=vstorage.patches.from==="local"?"git":"local";toasts.showToast(`Switched to ${otter==="git"?"GitHub":"local"} patches`,assets.getAssetIDByName("RetryIcon")),vstorage.patches.from=otter,setPatches(void 0)}else lastThemePressTime=Date.now()+500}},patches2?common.React.createElement(common.React.Fragment,null,commits?Array.isArray(commits)?common.React.createElement(Commit,{commit:commits.find(function(x){return x.sha===vstorage.patches.commit})??commits[0],onPress:function(){return openCommitsPage(navigation)},onLongPress:function(){return showSimpleActionSheet({key:"CardOverflow",header:{title:"Patches",onClose:function(){return LazyActionSheet.hideActionSheet()}},options:[{label:"Use latest commit as patches",onPress:function(){toasts.showToast("Using latest commit",assets.getAssetIDByName("ThreadPlusIcon")),delete vstorage.patches.commit}}]})}}):common.React.createElement(View,{style:{marginTop:35,marginBottom:20,flexDirection:"column",justifyContent:"center",alignItems:"center"}},common.React.createElement(Text,{variant:"text-md/semibold",color:"TEXT_DANGER",align:"center"},"You've been ratelimited by GitHub."),common.React.createElement(Text,{variant:"text-md/semibold",color:"TEXT_DANGER",align:"center",onPress:function(){return setCommits(void 0)}},common.React.createElement(RichText.Underline,null,"Tap to retry"))):common.React.createElement(common.ReactNative.ActivityIndicator,{style:{marginVertical:35},size:"small"}),common.React.createElement(LineDivider,{addPadding:!0}),common.React.createElement(FormRow,{label:"Load Theme",leading:common.React.createElement(FormRow.Icon,{source:assets.getAssetIDByName("WrenchIcon")}),trailing:common.React.createElement(IconButton,{onPress:function(){return apply(null)&&setIsLoadedTheme(!1)},disabled:!isLoadedTheme,size:"sm",variant:isLoadedTheme?buttonVariantPolyfill().destructive:"secondary",icon:assets.getAssetIDByName("TrashIcon")}),onPress:async function(){let theme;try{theme=build(patches2)}catch(e){return toasts.showToast(e.toString(),assets.getAssetIDByName("Small"))}apply(theme)&&setIsLoadedTheme(!0)}}),common.React.createElement(FormRow,{label:"Configure Theme",leading:common.React.createElement(FormRow.Icon,{source:assets.getAssetIDByName("SettingsIcon")}),trailing:common.React.createElement(FormRow.Arrow,null),onPress:function(){return openConfigurePage(navigation)}}),common.React.createElement(FormSwitchRow,{label:"Automatically Reapply Theme",subLabel:"Automatically reapplies Monet Theme when you change your Discord color scheme or restart the app",leading:common.React.createElement(FormRow.Icon,{source:assets.getAssetIDByName("DownloadIcon")}),onValueChange:function(){return vstorage.autoReapply=!vstorage.autoReapply},value:vstorage.autoReapply}),common.React.createElement(FormRow,{label:"Reload Theme Patches",subLabel:`Patch v${patches2.version} (${vstorage.patches.from==="local"?"from a local source":"from GitHub"})`,leading:common.React.createElement(FormRow.Icon,{source:assets.getAssetIDByName("ActivitiesIcon")}),onPress:function(){return setPatches(void 0)}})):common.React.createElement(common.ReactNative.ActivityIndicator,{style:{marginVertical:166},size:"small"})),common.React.createElement(View,{style:{height:12}}))}const patchesURL=function(){return`https://raw.githubusercontent.com/nexpid/VendettaMonetTheme/${vstorage.patches.commit??"main"}/patches.jsonc`},devPatchesURL="http://192.168.2.22:8730/patches.jsonc",commitsURL="https://api.github.com/repos/nexpid/VendettaMonetTheme/commits?path=patches.jsonc",ThemeStore=metro.findByStoreName("ThemeStore"),getSysColors=function(){return window.bunny.api.native.loader.getSysColors()},hasTheme=function(){var _window_bunny_managers_themes_getCurrentTheme;return(_window_bunny_managers_themes_getCurrentTheme=window.bunny.managers.themes.getCurrentTheme())===null||_window_bunny_managers_themes_getCurrentTheme===void 0?void 0:_window_bunny_managers_themes_getCurrentTheme.id.includes("monet-theme")},getDiscordTheme=function(){const theme=ThemeStore.theme;return theme.startsWith("vd-theme-")?theme.split("-")[3]:theme},vstorage=plugin.storage,patches=[];var index={settings,onLoad:async function(){var _vstorage_reapplyCache,_vstorage_reapplyCache1;const syscolors=getSysColors();vstorage.colors??(vstorage.colors={neutral1:syscolors?.neutral1[7]??"#747679",neutral2:syscolors?.neutral2[7]??"#70777C",accent1:syscolors?.accent1[7]??"#007FAC",accent2:syscolors?.accent2[7]??"#657985",accent3:syscolors?.accent3[7]??"#787296"}),vstorage.config??(vstorage.config={wallpaper:"none"}),vstorage.autoReapply??(vstorage.autoReapply=!1),vstorage.patches??(vstorage.patches={from:"git"});const oldColors=(_vstorage_reapplyCache=vstorage.reapplyCache)===null||_vstorage_reapplyCache===void 0?void 0:_vstorage_reapplyCache.colors,oldTheme=(_vstorage_reapplyCache1=vstorage.reapplyCache)===null||_vstorage_reapplyCache1===void 0?void 0:_vstorage_reapplyCache1.theme;let lTheme=getDiscordTheme();vstorage.reapplyCache={colors:JSON.stringify(syscolors),theme:lTheme};const reapply=async function(){if(!vstorage.autoReapply||!hasTheme())return;toasts.showToast("Reapplying Monet Theme",assets.getAssetIDByName("RetryIcon"));let cpatches;try{cpatches=parse((await(await utils.safeFetch(vstorage.patches.from==="local"?devPatchesURL:patchesURL(),{headers:{"cache-control":"public, max-age=600"}})).text()).replace(/\r/g,""))}catch{return toasts.showToast("Failed to fetch color patches!",assets.getAssetIDByName("Small"))}let theme;try{theme=build(cpatches)}catch{return toasts.showToast("Failed to build theme!",assets.getAssetIDByName("Small"))}apply(theme)};oldTheme&&oldColors&&syscolors&&(vstorage.reapplyCache.colors!==oldColors||vstorage.reapplyCache.theme!==oldTheme)&&reapply();const onThemeChanged=function(){const newLTheme=getDiscordTheme();lTheme!==newLTheme&&reapply(),lTheme=newLTheme};ThemeStore.addChangeListener(onThemeChanged),patches.push(function(){return ThemeStore.removeChangeListener(onThemeChanged)})},onUnload:function(){patches.forEach(function(x){return x()}),hasTheme()&&alerts.showConfirmationAlert({title:"Deselect Theme",content:"Monet theme is currently selected, would you like to deselect it?",onConfirm:async function(){apply(!1)},confirmText:"Unload",confirmColor:"brand",cancelText:"Cancel"})}};return exports.commitsURL=commitsURL,exports.default=index,exports.devPatchesURL=devPatchesURL,exports.getDiscordTheme=getDiscordTheme,exports.getSysColors=getSysColors,exports.hasTheme=hasTheme,exports.patches=patches,exports.patchesURL=patchesURL,exports.vstorage=vstorage,Object.defineProperty(exports,"__esModule",{value:!0}),exports})({},vendetta.metro,vendetta.plugin,vendetta.ui.alerts,vendetta.ui.assets,vendetta.ui.toasts,vendetta.utils,vendetta.debug,vendetta.metro.common,vendetta.storage,vendetta.ui,vendetta.ui.components,vendetta,vendetta.constants);
