(function(exports,metro,patcher){"use strict";const MediaManager=metro.findByProps("downloadMediaAsset"),ActionSheet=metro.findByProps("openLazy","hideActionSheet"),parseURL=function(url){const path=url.split("/"),tenorIndex=path.findIndex(function(x){return x.endsWith(".tenor.com")});if(tenorIndex===-1)return;const[host,id,file]=path.slice(tenorIndex,tenorIndex+3);if(!(!host||!id||!file))return`https://${host}/${id.slice(0,-2)}AC/${file.split(".")[0]}.gif`};let patches=[];var index={onLoad:function(){patches.push(patcher.before("downloadMediaAsset",MediaManager,function(args){const url=args[0];if(!url||typeof url!="string")return;const parsed=parseURL(url);parsed&&(args[0]=parsed,args[1]=1)})),patches.push(patcher.before("openLazy",ActionSheet,function(ctx){var _args_syncer_sources,_args_syncer;const[_,action,args]=ctx;if(action!=="MediaShareActionSheet")return;const data=args==null||(_args_syncer=args.syncer)===null||_args_syncer===void 0||(_args_syncer_sources=_args_syncer.sources)===null||_args_syncer_sources===void 0?void 0:_args_syncer_sources[0];if(!data||typeof data.uri!="string")return;const parsed=parseURL(data.uri);parsed&&(data.uri=parsed,data.sourceURI=parsed,delete data.videoURI,delete data.isGIFV),args.syncer.sources[0]=data}))},onUnload:function(){for(const x of patches)x();patches=[]}};return exports.default=index,Object.defineProperty(exports,"__esModule",{value:!0}),exports})({},vendetta.metro,vendetta.patcher);
