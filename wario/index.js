(function(exports,metro,common,patcher$1,plugin,plugins,toasts){"use strict";var _findByProps,_findByProps1,_findByProps2;metro.findByStoreName("ThemeStore");const{triggerHaptic}=metro.findByProps("triggerHaptic"),colorModule=metro.findByProps("colors","unsafe_rawColors");colorModule?.internal??colorModule?.meta,metro.findByProps("TextStyleSheet").TextStyleSheet,metro.findByName("Navigator")??((_findByProps=metro.findByProps("Navigator"))===null||_findByProps===void 0||_findByProps.Navigator),((_findByProps1=metro.findByProps("getRenderCloseButton"))===null||_findByProps1===void 0?void 0:_findByProps1.getRenderCloseButton)??((_findByProps2=metro.findByProps("getHeaderCloseButton"))===null||_findByProps2===void 0||_findByProps2.getHeaderCloseButton),metro.findByProps("popModal","pushModal");function doHaptic(dur){triggerHaptic();const interval=setInterval(triggerHaptic,1);return new Promise(function(res){return setTimeout(function(){return res(clearInterval(interval))},dur)})}const DCDChatManager=common.ReactNative.NativeModules.DCDChatManager,BottomTabBarItem=metro.findByName("BottomTabBarItem",!1),aLenStuff=".!,:tijl ".split(""),aLen=function(text){return text.split("").reduce(function(p,x){return p+(aLenStuff.includes(x)?1/4:1)},0)},wario="https://cdn.discordapp.com/attachments/919655852724604978/1197224092554772622/9k.png?ex=65ba7cd3&is=65a807d3&hm=802329bcd8341bb5e83c054cc7c42d9381f071d4f481fe666284dcdff01a0f2e&";function patcher(){const patches=new Array;patches.push(patcher$1.before("render",common.ReactNative.Image,function(param){let[x]=param;x.ignore||(x.resizeMode="stretch",x.source={uri:wario},x.style={...common.ReactNative.StyleSheet.flatten(x.style),tintColor:void 0})})),patches.push(patcher$1.before("render",common.ReactNative.Text,function(param){let[x]=param;const len=(Array.isArray(x.children)?x.children:[x.children]).filter(function(x2){return typeof x2=="string"}).reduce(function(a,x2){return a+aLen(x2)},0),style=common.ReactNative.StyleSheet.flatten(x.style);x.children=common.React.createElement(common.ReactNative.Image,{resizeMode:"stretch",source:{uri:wario},style:{...style,color:void 0,width:style.fontSize*len,height:style.fontSize}})},!0)),patches.push(patcher$1.before("updateRows",DCDChatManager,function(args){const rows=JSON.parse(args[1]);for(const row of rows){var _message_referencedMessage;if(!row.message)continue;const{message}=row,iterate=function(thing){const stuff=[];for(const x of thing)if(typeof x.content=="string")for(let i=0;i<Math.floor(aLen(x.content));i++)stuff.push({type:"guild",guildId:"0",content:"",icon:wario});else Array.isArray(x.content)?stuff.push({...x,content:iterate(x.content)}):stuff.push(x);return stuff},editMessage=function(msg){msg.content&&(msg.content=iterate(msg.content));for(const embed of msg.embeds??[]){var _embed_footer,_embed_footer1;embed.title&&(embed.title=iterate(embed.title)),embed.description&&(embed.description=iterate(embed.description)),(!((_embed_footer=embed.footer)===null||_embed_footer===void 0)&&_embed_footer.text||!((_embed_footer1=embed.footer)===null||_embed_footer1===void 0)&&_embed_footer1.content)&&(embed.footer.text="wario",embed.footer.content="wario")}msg.username="wario",msg.timestamp="wario",msg.avatarURL=wario,delete msg.avatarDecorationURL};editMessage(message),!((_message_referencedMessage=message.referencedMessage)===null||_message_referencedMessage===void 0)&&_message_referencedMessage.message&&editMessage(message.referencedMessage.message),console.log(message)}args[1]=JSON.stringify(rows)}));const gone=function(){doHaptic(50),plugins.stopPlugin(plugin.id,!0),toasts.showToast("Wario is gone!")};return patches.push(patcher$1.after("default",BottomTabBarItem,function(param,ret){let[{route:{name}}]=param;return name!=="guilds"||(ret.props.onLongPress=gone),ret})),patches.push(patcher$1.before("render",common.ReactNative.Pressable.type,function(param){let[props]=param;props.accessibilityLabel==="Chat"&&(props.delayLongPress=0,props.onLongPress=gone)})),function(){return patches.forEach(function(x){return x()})}}let unpatch;const onLoad=function(){return unpatch=patcher()},onUnload=function(){return unpatch?.()};return exports.onLoad=onLoad,exports.onUnload=onUnload,exports})({},vendetta.metro,vendetta.metro.common,vendetta.patcher,vendetta.plugin,vendetta.plugins,vendetta.ui.toasts);
